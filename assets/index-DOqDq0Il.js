function Rf(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Pf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zc={exports:{}},ji={},Mc={exports:{}},B={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ds=Symbol.for("react.element"),Af=Symbol.for("react.portal"),$f=Symbol.for("react.fragment"),If=Symbol.for("react.strict_mode"),Lf=Symbol.for("react.profiler"),Uf=Symbol.for("react.provider"),Df=Symbol.for("react.context"),zf=Symbol.for("react.forward_ref"),Mf=Symbol.for("react.suspense"),Bf=Symbol.for("react.memo"),Ff=Symbol.for("react.lazy"),Kl=Symbol.iterator;function Vf(e){return e===null||typeof e!="object"?null:(e=Kl&&e[Kl]||e["@@iterator"],typeof e=="function"?e:null)}var Bc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fc=Object.assign,Vc={};function un(e,t,r){this.props=e,this.context=t,this.refs=Vc,this.updater=r||Bc}un.prototype.isReactComponent={};un.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};un.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Wc(){}Wc.prototype=un.prototype;function Wa(e,t,r){this.props=e,this.context=t,this.refs=Vc,this.updater=r||Bc}var qa=Wa.prototype=new Wc;qa.constructor=Wa;Fc(qa,un.prototype);qa.isPureReactComponent=!0;var Hl=Array.isArray,qc=Object.prototype.hasOwnProperty,Ka={current:null},Kc={key:!0,ref:!0,__self:!0,__source:!0};function Hc(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)qc.call(t,n)&&!Kc.hasOwnProperty(n)&&(s[n]=t[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:ds,type:e,key:i,ref:o,props:s,_owner:Ka.current}}function Wf(e,t){return{$$typeof:ds,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ha(e){return typeof e=="object"&&e!==null&&e.$$typeof===ds}function qf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Gl=/\/+/g;function Qi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?qf(""+e.key):t.toString(36)}function Bs(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ds:case Af:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Qi(o,0):n,Hl(s)?(r="",e!=null&&(r=e.replace(Gl,"$&/")+"/"),Bs(s,t,r,"",function(u){return u})):s!=null&&(Ha(s)&&(s=Wf(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Gl,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",Hl(e))for(var a=0;a<e.length;a++){i=e[a];var l=n+Qi(i,a);o+=Bs(i,t,r,l,s)}else if(l=Vf(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=n+Qi(i,a++),o+=Bs(i,t,r,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ws(e,t,r){if(e==null)return e;var n=[],s=0;return Bs(e,n,"","",function(i){return t.call(r,i,s++)}),n}function Kf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ne={current:null},Fs={transition:null},Hf={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:Fs,ReactCurrentOwner:Ka};function Gc(){throw Error("act(...) is not supported in production builds of React.")}B.Children={map:ws,forEach:function(e,t,r){ws(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ws(e,function(){t++}),t},toArray:function(e){return ws(e,function(t){return t})||[]},only:function(e){if(!Ha(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};B.Component=un;B.Fragment=$f;B.Profiler=Lf;B.PureComponent=Wa;B.StrictMode=If;B.Suspense=Mf;B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hf;B.act=Gc;B.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Fc({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Ka.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)qc.call(t,l)&&!Kc.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:ds,type:e.type,key:s,ref:i,props:n,_owner:o}};B.createContext=function(e){return e={$$typeof:Df,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Uf,_context:e},e.Consumer=e};B.createElement=Hc;B.createFactory=function(e){var t=Hc.bind(null,e);return t.type=e,t};B.createRef=function(){return{current:null}};B.forwardRef=function(e){return{$$typeof:zf,render:e}};B.isValidElement=Ha;B.lazy=function(e){return{$$typeof:Ff,_payload:{_status:-1,_result:e},_init:Kf}};B.memo=function(e,t){return{$$typeof:Bf,type:e,compare:t===void 0?null:t}};B.startTransition=function(e){var t=Fs.transition;Fs.transition={};try{e()}finally{Fs.transition=t}};B.unstable_act=Gc;B.useCallback=function(e,t){return Ne.current.useCallback(e,t)};B.useContext=function(e){return Ne.current.useContext(e)};B.useDebugValue=function(){};B.useDeferredValue=function(e){return Ne.current.useDeferredValue(e)};B.useEffect=function(e,t){return Ne.current.useEffect(e,t)};B.useId=function(){return Ne.current.useId()};B.useImperativeHandle=function(e,t,r){return Ne.current.useImperativeHandle(e,t,r)};B.useInsertionEffect=function(e,t){return Ne.current.useInsertionEffect(e,t)};B.useLayoutEffect=function(e,t){return Ne.current.useLayoutEffect(e,t)};B.useMemo=function(e,t){return Ne.current.useMemo(e,t)};B.useReducer=function(e,t,r){return Ne.current.useReducer(e,t,r)};B.useRef=function(e){return Ne.current.useRef(e)};B.useState=function(e){return Ne.current.useState(e)};B.useSyncExternalStore=function(e,t,r){return Ne.current.useSyncExternalStore(e,t,r)};B.useTransition=function(){return Ne.current.useTransition()};B.version="18.3.1";Mc.exports=B;var b=Mc.exports;const zn=Pf(b),Gf=Rf({__proto__:null,default:zn},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jf=b,Qf=Symbol.for("react.element"),Yf=Symbol.for("react.fragment"),Xf=Object.prototype.hasOwnProperty,Zf=Jf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ep={key:!0,ref:!0,__self:!0,__source:!0};function Jc(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Xf.call(t,n)&&!ep.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Qf,type:e,key:i,ref:o,props:s,_owner:Zf.current}}ji.Fragment=Yf;ji.jsx=Jc;ji.jsxs=Jc;zc.exports=ji;var h=zc.exports,Lo={},Qc={exports:{}},We={},Yc={exports:{}},Xc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,j){var P=N.length;N.push(j);e:for(;0<P;){var F=P-1>>>1,z=N[F];if(0<s(z,j))N[F]=j,N[P]=z,P=F;else break e}}function r(N){return N.length===0?null:N[0]}function n(N){if(N.length===0)return null;var j=N[0],P=N.pop();if(P!==j){N[0]=P;e:for(var F=0,z=N.length,D=z>>>1;F<D;){var W=2*(F+1)-1,ye=N[W],ue=W+1,O=N[ue];if(0>s(ye,P))ue<z&&0>s(O,ye)?(N[F]=O,N[ue]=P,F=ue):(N[F]=ye,N[W]=P,F=W);else if(ue<z&&0>s(O,P))N[F]=O,N[ue]=P,F=ue;else break e}}return j}function s(N,j){var P=N.sortIndex-j.sortIndex;return P!==0?P:N.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,m=!1,v=!1,w=!1,k=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(N){for(var j=r(u);j!==null;){if(j.callback===null)n(u);else if(j.startTime<=N)n(u),j.sortIndex=j.expirationTime,t(l,j);else break;j=r(u)}}function _(N){if(w=!1,y(N),!v)if(r(l)!==null)v=!0,Xt(S);else{var j=r(u);j!==null&&Zt(_,j.startTime-N)}}function S(N,j){v=!1,w&&(w=!1,g(C),C=-1),m=!0;var P=f;try{for(y(j),d=r(l);d!==null&&(!(d.expirationTime>j)||N&&!be());){var F=d.callback;if(typeof F=="function"){d.callback=null,f=d.priorityLevel;var z=F(d.expirationTime<=j);j=e.unstable_now(),typeof z=="function"?d.callback=z:d===r(l)&&n(l),y(j)}else n(l);d=r(l)}if(d!==null)var D=!0;else{var W=r(u);W!==null&&Zt(_,W.startTime-j),D=!1}return D}finally{d=null,f=P,m=!1}}var x=!1,E=null,C=-1,M=5,I=-1;function be(){return!(e.unstable_now()-I<M)}function Ke(){if(E!==null){var N=e.unstable_now();I=N;var j=!0;try{j=E(!0,N)}finally{j?V():(x=!1,E=null)}}else x=!1}var V;if(typeof p=="function")V=function(){p(Ke)};else if(typeof MessageChannel<"u"){var br=new MessageChannel,fn=br.port2;br.port1.onmessage=Ke,V=function(){fn.postMessage(null)}}else V=function(){k(Ke,0)};function Xt(N){E=N,x||(x=!0,V())}function Zt(N,j){C=k(function(){N(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,Xt(S))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(N){switch(f){case 1:case 2:case 3:var j=3;break;default:j=f}var P=f;f=j;try{return N()}finally{f=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,j){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var P=f;f=N;try{return j()}finally{f=P}},e.unstable_scheduleCallback=function(N,j,P){var F=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?F+P:F):P=F,N){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=P+z,N={id:c++,callback:j,priorityLevel:N,startTime:P,expirationTime:z,sortIndex:-1},P>F?(N.sortIndex=P,t(u,N),r(l)===null&&N===r(u)&&(w?(g(C),C=-1):w=!0,Zt(_,P-F))):(N.sortIndex=z,t(l,N),v||m||(v=!0,Xt(S))),N},e.unstable_shouldYield=be,e.unstable_wrapCallback=function(N){var j=f;return function(){var P=f;f=j;try{return N.apply(this,arguments)}finally{f=P}}}})(Xc);Yc.exports=Xc;var tp=Yc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp=b,Ve=tp;function T(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zc=new Set,Mn={};function _r(e,t){tn(e,t),tn(e+"Capture",t)}function tn(e,t){for(Mn[e]=t,e=0;e<t.length;e++)Zc.add(t[e])}var kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uo=Object.prototype.hasOwnProperty,np=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jl={},Ql={};function sp(e){return Uo.call(Ql,e)?!0:Uo.call(Jl,e)?!1:np.test(e)?Ql[e]=!0:(Jl[e]=!0,!1)}function ip(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function op(e,t,r,n){if(t===null||typeof t>"u"||ip(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Re(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ke[e]=new Re(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ke[t]=new Re(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ke[e]=new Re(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ke[e]=new Re(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ke[e]=new Re(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ke[e]=new Re(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ke[e]=new Re(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ke[e]=new Re(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ke[e]=new Re(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ga=/[\-:]([a-z])/g;function Ja(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ga,Ja);ke[t]=new Re(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ga,Ja);ke[t]=new Re(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ga,Ja);ke[t]=new Re(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ke[e]=new Re(e,1,!1,e.toLowerCase(),null,!1,!1)});ke.xlinkHref=new Re("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ke[e]=new Re(e,1,!1,e.toLowerCase(),null,!0,!0)});function Qa(e,t,r,n){var s=ke.hasOwnProperty(t)?ke[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(op(t,r,s,n)&&(r=null),n||s===null?sp(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ct=rp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_s=Symbol.for("react.element"),$r=Symbol.for("react.portal"),Ir=Symbol.for("react.fragment"),Ya=Symbol.for("react.strict_mode"),Do=Symbol.for("react.profiler"),ed=Symbol.for("react.provider"),td=Symbol.for("react.context"),Xa=Symbol.for("react.forward_ref"),zo=Symbol.for("react.suspense"),Mo=Symbol.for("react.suspense_list"),Za=Symbol.for("react.memo"),Ot=Symbol.for("react.lazy"),rd=Symbol.for("react.offscreen"),Yl=Symbol.iterator;function pn(e){return e===null||typeof e!="object"?null:(e=Yl&&e[Yl]||e["@@iterator"],typeof e=="function"?e:null)}var re=Object.assign,Yi;function bn(e){if(Yi===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Yi=t&&t[1]||""}return`
`+Yi+e}var Xi=!1;function Zi(e,t){if(!e||Xi)return"";Xi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Xi=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?bn(e):""}function ap(e){switch(e.tag){case 5:return bn(e.type);case 16:return bn("Lazy");case 13:return bn("Suspense");case 19:return bn("SuspenseList");case 0:case 2:case 15:return e=Zi(e.type,!1),e;case 11:return e=Zi(e.type.render,!1),e;case 1:return e=Zi(e.type,!0),e;default:return""}}function Bo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ir:return"Fragment";case $r:return"Portal";case Do:return"Profiler";case Ya:return"StrictMode";case zo:return"Suspense";case Mo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case td:return(e.displayName||"Context")+".Consumer";case ed:return(e._context.displayName||"Context")+".Provider";case Xa:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Za:return t=e.displayName||null,t!==null?t:Bo(e.type)||"Memo";case Ot:t=e._payload,e=e._init;try{return Bo(e(t))}catch{}}return null}function lp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bo(t);case 8:return t===Ya?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Kt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function nd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function up(e){var t=nd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xs(e){e._valueTracker||(e._valueTracker=up(e))}function sd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=nd(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ti(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fo(e,t){var r=t.checked;return re({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Xl(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Kt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function id(e,t){t=t.checked,t!=null&&Qa(e,"checked",t,!1)}function Vo(e,t){id(e,t);var r=Kt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wo(e,t.type,r):t.hasOwnProperty("defaultValue")&&Wo(e,t.type,Kt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zl(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Wo(e,t,r){(t!=="number"||ti(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Sn=Array.isArray;function Hr(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Kt(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function qo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(T(91));return re({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function eu(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(T(92));if(Sn(r)){if(1<r.length)throw Error(T(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Kt(r)}}function od(e,t){var r=Kt(t.value),n=Kt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function tu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ad(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ko(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ad(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ks,ld=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ks=ks||document.createElement("div"),ks.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ks.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Bn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var jn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cp=["Webkit","ms","Moz","O"];Object.keys(jn).forEach(function(e){cp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jn[t]=jn[e]})});function ud(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||jn.hasOwnProperty(e)&&jn[e]?(""+t).trim():t+"px"}function cd(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=ud(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var dp=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ho(e,t){if(t){if(dp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(T(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(T(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(T(61))}if(t.style!=null&&typeof t.style!="object")throw Error(T(62))}}function Go(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jo=null;function el(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qo=null,Gr=null,Jr=null;function ru(e){if(e=ps(e)){if(typeof Qo!="function")throw Error(T(280));var t=e.stateNode;t&&(t=Ai(t),Qo(e.stateNode,e.type,t))}}function dd(e){Gr?Jr?Jr.push(e):Jr=[e]:Gr=e}function hd(){if(Gr){var e=Gr,t=Jr;if(Jr=Gr=null,ru(e),t)for(e=0;e<t.length;e++)ru(t[e])}}function fd(e,t){return e(t)}function pd(){}var eo=!1;function gd(e,t,r){if(eo)return e(t,r);eo=!0;try{return fd(e,t,r)}finally{eo=!1,(Gr!==null||Jr!==null)&&(pd(),hd())}}function Fn(e,t){var r=e.stateNode;if(r===null)return null;var n=Ai(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(T(231,t,typeof r));return r}var Yo=!1;if(kt)try{var gn={};Object.defineProperty(gn,"passive",{get:function(){Yo=!0}}),window.addEventListener("test",gn,gn),window.removeEventListener("test",gn,gn)}catch{Yo=!1}function hp(e,t,r,n,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(c){this.onError(c)}}var On=!1,ri=null,ni=!1,Xo=null,fp={onError:function(e){On=!0,ri=e}};function pp(e,t,r,n,s,i,o,a,l){On=!1,ri=null,hp.apply(fp,arguments)}function gp(e,t,r,n,s,i,o,a,l){if(pp.apply(this,arguments),On){if(On){var u=ri;On=!1,ri=null}else throw Error(T(198));ni||(ni=!0,Xo=u)}}function xr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function md(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nu(e){if(xr(e)!==e)throw Error(T(188))}function mp(e){var t=e.alternate;if(!t){if(t=xr(e),t===null)throw Error(T(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return nu(s),e;if(i===n)return nu(s),t;i=i.sibling}throw Error(T(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o)throw Error(T(189))}}if(r.alternate!==n)throw Error(T(190))}if(r.tag!==3)throw Error(T(188));return r.stateNode.current===r?e:t}function yd(e){return e=mp(e),e!==null?vd(e):null}function vd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=vd(e);if(t!==null)return t;e=e.sibling}return null}var wd=Ve.unstable_scheduleCallback,su=Ve.unstable_cancelCallback,yp=Ve.unstable_shouldYield,vp=Ve.unstable_requestPaint,ie=Ve.unstable_now,wp=Ve.unstable_getCurrentPriorityLevel,tl=Ve.unstable_ImmediatePriority,_d=Ve.unstable_UserBlockingPriority,si=Ve.unstable_NormalPriority,_p=Ve.unstable_LowPriority,xd=Ve.unstable_IdlePriority,Oi=null,ft=null;function xp(e){if(ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(Oi,e,void 0,(e.current.flags&128)===128)}catch{}}var ot=Math.clz32?Math.clz32:Sp,kp=Math.log,bp=Math.LN2;function Sp(e){return e>>>=0,e===0?32:31-(kp(e)/bp|0)|0}var bs=64,Ss=4194304;function En(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ii(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~s;a!==0?n=En(a):(i&=o,i!==0&&(n=En(i)))}else o=r&~s,o!==0?n=En(o):i!==0&&(n=En(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ot(t),s=1<<r,n|=e[r],t&=~s;return n}function Ep(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cp(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),a=1<<o,l=s[o];l===-1?(!(a&r)||a&n)&&(s[o]=Ep(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function Zo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function kd(){var e=bs;return bs<<=1,!(bs&4194240)&&(bs=64),e}function to(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function hs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ot(t),e[t]=r}function Tp(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ot(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function rl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ot(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var H=0;function bd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Sd,nl,Ed,Cd,Td,ea=!1,Es=[],Dt=null,zt=null,Mt=null,Vn=new Map,Wn=new Map,Pt=[],jp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iu(e,t){switch(e){case"focusin":case"focusout":Dt=null;break;case"dragenter":case"dragleave":zt=null;break;case"mouseover":case"mouseout":Mt=null;break;case"pointerover":case"pointerout":Vn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wn.delete(t.pointerId)}}function mn(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=ps(t),t!==null&&nl(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Op(e,t,r,n,s){switch(t){case"focusin":return Dt=mn(Dt,e,t,r,n,s),!0;case"dragenter":return zt=mn(zt,e,t,r,n,s),!0;case"mouseover":return Mt=mn(Mt,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Vn.set(i,mn(Vn.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Wn.set(i,mn(Wn.get(i)||null,e,t,r,n,s)),!0}return!1}function jd(e){var t=lr(e.target);if(t!==null){var r=xr(t);if(r!==null){if(t=r.tag,t===13){if(t=md(r),t!==null){e.blockedOn=t,Td(e.priority,function(){Ed(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ta(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Jo=n,r.target.dispatchEvent(n),Jo=null}else return t=ps(r),t!==null&&nl(t),e.blockedOn=r,!1;t.shift()}return!0}function ou(e,t,r){Vs(e)&&r.delete(t)}function Np(){ea=!1,Dt!==null&&Vs(Dt)&&(Dt=null),zt!==null&&Vs(zt)&&(zt=null),Mt!==null&&Vs(Mt)&&(Mt=null),Vn.forEach(ou),Wn.forEach(ou)}function yn(e,t){e.blockedOn===t&&(e.blockedOn=null,ea||(ea=!0,Ve.unstable_scheduleCallback(Ve.unstable_NormalPriority,Np)))}function qn(e){function t(s){return yn(s,e)}if(0<Es.length){yn(Es[0],e);for(var r=1;r<Es.length;r++){var n=Es[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Dt!==null&&yn(Dt,e),zt!==null&&yn(zt,e),Mt!==null&&yn(Mt,e),Vn.forEach(t),Wn.forEach(t),r=0;r<Pt.length;r++)n=Pt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Pt.length&&(r=Pt[0],r.blockedOn===null);)jd(r),r.blockedOn===null&&Pt.shift()}var Qr=Ct.ReactCurrentBatchConfig,oi=!0;function Rp(e,t,r,n){var s=H,i=Qr.transition;Qr.transition=null;try{H=1,sl(e,t,r,n)}finally{H=s,Qr.transition=i}}function Pp(e,t,r,n){var s=H,i=Qr.transition;Qr.transition=null;try{H=4,sl(e,t,r,n)}finally{H=s,Qr.transition=i}}function sl(e,t,r,n){if(oi){var s=ta(e,t,r,n);if(s===null)ho(e,t,n,ai,r),iu(e,n);else if(Op(s,e,t,r,n))n.stopPropagation();else if(iu(e,n),t&4&&-1<jp.indexOf(e)){for(;s!==null;){var i=ps(s);if(i!==null&&Sd(i),i=ta(e,t,r,n),i===null&&ho(e,t,n,ai,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else ho(e,t,n,null,r)}}var ai=null;function ta(e,t,r,n){if(ai=null,e=el(n),e=lr(e),e!==null)if(t=xr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=md(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ai=e,null}function Od(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wp()){case tl:return 1;case _d:return 4;case si:case _p:return 16;case xd:return 536870912;default:return 16}default:return 16}}var It=null,il=null,Ws=null;function Nd(){if(Ws)return Ws;var e,t=il,r=t.length,n,s="value"in It?It.value:It.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return Ws=s.slice(e,1<n?1-n:void 0)}function qs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cs(){return!0}function au(){return!1}function qe(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Cs:au,this.isPropagationStopped=au,this}return re(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Cs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Cs)},persist:function(){},isPersistent:Cs}),t}var cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ol=qe(cn),fs=re({},cn,{view:0,detail:0}),Ap=qe(fs),ro,no,vn,Ni=re({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:al,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vn&&(vn&&e.type==="mousemove"?(ro=e.screenX-vn.screenX,no=e.screenY-vn.screenY):no=ro=0,vn=e),ro)},movementY:function(e){return"movementY"in e?e.movementY:no}}),lu=qe(Ni),$p=re({},Ni,{dataTransfer:0}),Ip=qe($p),Lp=re({},fs,{relatedTarget:0}),so=qe(Lp),Up=re({},cn,{animationName:0,elapsedTime:0,pseudoElement:0}),Dp=qe(Up),zp=re({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mp=qe(zp),Bp=re({},cn,{data:0}),uu=qe(Bp),Fp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Wp[e])?!!t[e]:!1}function al(){return qp}var Kp=re({},fs,{key:function(e){if(e.key){var t=Fp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:al,charCode:function(e){return e.type==="keypress"?qs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hp=qe(Kp),Gp=re({},Ni,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cu=qe(Gp),Jp=re({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:al}),Qp=qe(Jp),Yp=re({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xp=qe(Yp),Zp=re({},Ni,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),eg=qe(Zp),tg=[9,13,27,32],ll=kt&&"CompositionEvent"in window,Nn=null;kt&&"documentMode"in document&&(Nn=document.documentMode);var rg=kt&&"TextEvent"in window&&!Nn,Rd=kt&&(!ll||Nn&&8<Nn&&11>=Nn),du=" ",hu=!1;function Pd(e,t){switch(e){case"keyup":return tg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ad(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Lr=!1;function ng(e,t){switch(e){case"compositionend":return Ad(t);case"keypress":return t.which!==32?null:(hu=!0,du);case"textInput":return e=t.data,e===du&&hu?null:e;default:return null}}function sg(e,t){if(Lr)return e==="compositionend"||!ll&&Pd(e,t)?(e=Nd(),Ws=il=It=null,Lr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rd&&t.locale!=="ko"?null:t.data;default:return null}}var ig={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ig[e.type]:t==="textarea"}function $d(e,t,r,n){dd(n),t=li(t,"onChange"),0<t.length&&(r=new ol("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Rn=null,Kn=null;function og(e){qd(e,0)}function Ri(e){var t=zr(e);if(sd(t))return e}function ag(e,t){if(e==="change")return t}var Id=!1;if(kt){var io;if(kt){var oo="oninput"in document;if(!oo){var pu=document.createElement("div");pu.setAttribute("oninput","return;"),oo=typeof pu.oninput=="function"}io=oo}else io=!1;Id=io&&(!document.documentMode||9<document.documentMode)}function gu(){Rn&&(Rn.detachEvent("onpropertychange",Ld),Kn=Rn=null)}function Ld(e){if(e.propertyName==="value"&&Ri(Kn)){var t=[];$d(t,Kn,e,el(e)),gd(og,t)}}function lg(e,t,r){e==="focusin"?(gu(),Rn=t,Kn=r,Rn.attachEvent("onpropertychange",Ld)):e==="focusout"&&gu()}function ug(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ri(Kn)}function cg(e,t){if(e==="click")return Ri(t)}function dg(e,t){if(e==="input"||e==="change")return Ri(t)}function hg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lt=typeof Object.is=="function"?Object.is:hg;function Hn(e,t){if(lt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Uo.call(t,s)||!lt(e[s],t[s]))return!1}return!0}function mu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yu(e,t){var r=mu(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=mu(r)}}function Ud(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ud(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Dd(){for(var e=window,t=ti();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ti(e.document)}return t}function ul(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fg(e){var t=Dd(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Ud(r.ownerDocument.documentElement,r)){if(n!==null&&ul(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=yu(r,i);var o=yu(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pg=kt&&"documentMode"in document&&11>=document.documentMode,Ur=null,ra=null,Pn=null,na=!1;function vu(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;na||Ur==null||Ur!==ti(n)||(n=Ur,"selectionStart"in n&&ul(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Pn&&Hn(Pn,n)||(Pn=n,n=li(ra,"onSelect"),0<n.length&&(t=new ol("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ur)))}function Ts(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Dr={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionend:Ts("Transition","TransitionEnd")},ao={},zd={};kt&&(zd=document.createElement("div").style,"AnimationEvent"in window||(delete Dr.animationend.animation,delete Dr.animationiteration.animation,delete Dr.animationstart.animation),"TransitionEvent"in window||delete Dr.transitionend.transition);function Pi(e){if(ao[e])return ao[e];if(!Dr[e])return e;var t=Dr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in zd)return ao[e]=t[r];return e}var Md=Pi("animationend"),Bd=Pi("animationiteration"),Fd=Pi("animationstart"),Vd=Pi("transitionend"),Wd=new Map,wu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gt(e,t){Wd.set(e,t),_r(t,[e])}for(var lo=0;lo<wu.length;lo++){var uo=wu[lo],gg=uo.toLowerCase(),mg=uo[0].toUpperCase()+uo.slice(1);Gt(gg,"on"+mg)}Gt(Md,"onAnimationEnd");Gt(Bd,"onAnimationIteration");Gt(Fd,"onAnimationStart");Gt("dblclick","onDoubleClick");Gt("focusin","onFocus");Gt("focusout","onBlur");Gt(Vd,"onTransitionEnd");tn("onMouseEnter",["mouseout","mouseover"]);tn("onMouseLeave",["mouseout","mouseover"]);tn("onPointerEnter",["pointerout","pointerover"]);tn("onPointerLeave",["pointerout","pointerover"]);_r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_r("onBeforeInput",["compositionend","keypress","textInput","paste"]);_r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cn));function _u(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,gp(n,t,void 0,e),e.currentTarget=null}function qd(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;_u(s,a,u),i=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;_u(s,a,u),i=l}}}if(ni)throw e=Xo,ni=!1,Xo=null,e}function Q(e,t){var r=t[la];r===void 0&&(r=t[la]=new Set);var n=e+"__bubble";r.has(n)||(Kd(t,e,2,!1),r.add(n))}function co(e,t,r){var n=0;t&&(n|=4),Kd(r,e,n,t)}var js="_reactListening"+Math.random().toString(36).slice(2);function Gn(e){if(!e[js]){e[js]=!0,Zc.forEach(function(r){r!=="selectionchange"&&(yg.has(r)||co(r,!1,e),co(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[js]||(t[js]=!0,co("selectionchange",!1,t))}}function Kd(e,t,r,n){switch(Od(t)){case 1:var s=Rp;break;case 4:s=Pp;break;default:s=sl}r=s.bind(null,t,r,e),s=void 0,!Yo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function ho(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=lr(a),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}a=a.parentNode}}n=n.return}gd(function(){var u=i,c=el(r),d=[];e:{var f=Wd.get(e);if(f!==void 0){var m=ol,v=e;switch(e){case"keypress":if(qs(r)===0)break e;case"keydown":case"keyup":m=Hp;break;case"focusin":v="focus",m=so;break;case"focusout":v="blur",m=so;break;case"beforeblur":case"afterblur":m=so;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=lu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Ip;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Qp;break;case Md:case Bd:case Fd:m=Dp;break;case Vd:m=Xp;break;case"scroll":m=Ap;break;case"wheel":m=eg;break;case"copy":case"cut":case"paste":m=Mp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=cu}var w=(t&4)!==0,k=!w&&e==="scroll",g=w?f!==null?f+"Capture":null:f;w=[];for(var p=u,y;p!==null;){y=p;var _=y.stateNode;if(y.tag===5&&_!==null&&(y=_,g!==null&&(_=Fn(p,g),_!=null&&w.push(Jn(p,_,y)))),k)break;p=p.return}0<w.length&&(f=new m(f,v,null,r,c),d.push({event:f,listeners:w}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&r!==Jo&&(v=r.relatedTarget||r.fromElement)&&(lr(v)||v[bt]))break e;if((m||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=r.relatedTarget||r.toElement,m=u,v=v?lr(v):null,v!==null&&(k=xr(v),v!==k||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(w=lu,_="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(w=cu,_="onPointerLeave",g="onPointerEnter",p="pointer"),k=m==null?f:zr(m),y=v==null?f:zr(v),f=new w(_,p+"leave",m,r,c),f.target=k,f.relatedTarget=y,_=null,lr(c)===u&&(w=new w(g,p+"enter",v,r,c),w.target=y,w.relatedTarget=k,_=w),k=_,m&&v)t:{for(w=m,g=v,p=0,y=w;y;y=Sr(y))p++;for(y=0,_=g;_;_=Sr(_))y++;for(;0<p-y;)w=Sr(w),p--;for(;0<y-p;)g=Sr(g),y--;for(;p--;){if(w===g||g!==null&&w===g.alternate)break t;w=Sr(w),g=Sr(g)}w=null}else w=null;m!==null&&xu(d,f,m,w,!1),v!==null&&k!==null&&xu(d,k,v,w,!0)}}e:{if(f=u?zr(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var S=ag;else if(fu(f))if(Id)S=dg;else{S=ug;var x=lg}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=cg);if(S&&(S=S(e,u))){$d(d,S,r,c);break e}x&&x(e,f,u),e==="focusout"&&(x=f._wrapperState)&&x.controlled&&f.type==="number"&&Wo(f,"number",f.value)}switch(x=u?zr(u):window,e){case"focusin":(fu(x)||x.contentEditable==="true")&&(Ur=x,ra=u,Pn=null);break;case"focusout":Pn=ra=Ur=null;break;case"mousedown":na=!0;break;case"contextmenu":case"mouseup":case"dragend":na=!1,vu(d,r,c);break;case"selectionchange":if(pg)break;case"keydown":case"keyup":vu(d,r,c)}var E;if(ll)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Lr?Pd(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(Rd&&r.locale!=="ko"&&(Lr||C!=="onCompositionStart"?C==="onCompositionEnd"&&Lr&&(E=Nd()):(It=c,il="value"in It?It.value:It.textContent,Lr=!0)),x=li(u,C),0<x.length&&(C=new uu(C,e,null,r,c),d.push({event:C,listeners:x}),E?C.data=E:(E=Ad(r),E!==null&&(C.data=E)))),(E=rg?ng(e,r):sg(e,r))&&(u=li(u,"onBeforeInput"),0<u.length&&(c=new uu("onBeforeInput","beforeinput",null,r,c),d.push({event:c,listeners:u}),c.data=E))}qd(d,t)})}function Jn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function li(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Fn(e,r),i!=null&&n.unshift(Jn(e,i,s)),i=Fn(e,t),i!=null&&n.push(Jn(e,i,s))),e=e.return}return n}function Sr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xu(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,s?(l=Fn(r,i),l!=null&&o.unshift(Jn(r,l,a))):s||(l=Fn(r,i),l!=null&&o.push(Jn(r,l,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var vg=/\r\n?/g,wg=/\u0000|\uFFFD/g;function ku(e){return(typeof e=="string"?e:""+e).replace(vg,`
`).replace(wg,"")}function Os(e,t,r){if(t=ku(t),ku(e)!==t&&r)throw Error(T(425))}function ui(){}var sa=null,ia=null;function oa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var aa=typeof setTimeout=="function"?setTimeout:void 0,_g=typeof clearTimeout=="function"?clearTimeout:void 0,bu=typeof Promise=="function"?Promise:void 0,xg=typeof queueMicrotask=="function"?queueMicrotask:typeof bu<"u"?function(e){return bu.resolve(null).then(e).catch(kg)}:aa;function kg(e){setTimeout(function(){throw e})}function fo(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),qn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);qn(t)}function Bt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Su(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var dn=Math.random().toString(36).slice(2),ht="__reactFiber$"+dn,Qn="__reactProps$"+dn,bt="__reactContainer$"+dn,la="__reactEvents$"+dn,bg="__reactListeners$"+dn,Sg="__reactHandles$"+dn;function lr(e){var t=e[ht];if(t)return t;for(var r=e.parentNode;r;){if(t=r[bt]||r[ht]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Su(e);e!==null;){if(r=e[ht])return r;e=Su(e)}return t}e=r,r=e.parentNode}return null}function ps(e){return e=e[ht]||e[bt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function zr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(T(33))}function Ai(e){return e[Qn]||null}var ua=[],Mr=-1;function Jt(e){return{current:e}}function Y(e){0>Mr||(e.current=ua[Mr],ua[Mr]=null,Mr--)}function J(e,t){Mr++,ua[Mr]=e.current,e.current=t}var Ht={},Te=Jt(Ht),$e=Jt(!1),gr=Ht;function rn(e,t){var r=e.type.contextTypes;if(!r)return Ht;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ie(e){return e=e.childContextTypes,e!=null}function ci(){Y($e),Y(Te)}function Eu(e,t,r){if(Te.current!==Ht)throw Error(T(168));J(Te,t),J($e,r)}function Hd(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(T(108,lp(e)||"Unknown",s));return re({},r,n)}function di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ht,gr=Te.current,J(Te,e),J($e,$e.current),!0}function Cu(e,t,r){var n=e.stateNode;if(!n)throw Error(T(169));r?(e=Hd(e,t,gr),n.__reactInternalMemoizedMergedChildContext=e,Y($e),Y(Te),J(Te,e)):Y($e),J($e,r)}var vt=null,$i=!1,po=!1;function Gd(e){vt===null?vt=[e]:vt.push(e)}function Eg(e){$i=!0,Gd(e)}function Qt(){if(!po&&vt!==null){po=!0;var e=0,t=H;try{var r=vt;for(H=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}vt=null,$i=!1}catch(s){throw vt!==null&&(vt=vt.slice(e+1)),wd(tl,Qt),s}finally{H=t,po=!1}}return null}var Br=[],Fr=0,hi=null,fi=0,He=[],Ge=0,mr=null,wt=1,_t="";function nr(e,t){Br[Fr++]=fi,Br[Fr++]=hi,hi=e,fi=t}function Jd(e,t,r){He[Ge++]=wt,He[Ge++]=_t,He[Ge++]=mr,mr=e;var n=wt;e=_t;var s=32-ot(n)-1;n&=~(1<<s),r+=1;var i=32-ot(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,wt=1<<32-ot(t)+s|r<<s|n,_t=i+e}else wt=1<<i|r<<s|n,_t=e}function cl(e){e.return!==null&&(nr(e,1),Jd(e,1,0))}function dl(e){for(;e===hi;)hi=Br[--Fr],Br[Fr]=null,fi=Br[--Fr],Br[Fr]=null;for(;e===mr;)mr=He[--Ge],He[Ge]=null,_t=He[--Ge],He[Ge]=null,wt=He[--Ge],He[Ge]=null}var Fe=null,Be=null,X=!1,it=null;function Qd(e,t){var r=Je(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Tu(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Fe=e,Be=Bt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Fe=e,Be=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=mr!==null?{id:wt,overflow:_t}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Je(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Fe=e,Be=null,!0):!1;default:return!1}}function ca(e){return(e.mode&1)!==0&&(e.flags&128)===0}function da(e){if(X){var t=Be;if(t){var r=t;if(!Tu(e,t)){if(ca(e))throw Error(T(418));t=Bt(r.nextSibling);var n=Fe;t&&Tu(e,t)?Qd(n,r):(e.flags=e.flags&-4097|2,X=!1,Fe=e)}}else{if(ca(e))throw Error(T(418));e.flags=e.flags&-4097|2,X=!1,Fe=e}}}function ju(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Fe=e}function Ns(e){if(e!==Fe)return!1;if(!X)return ju(e),X=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!oa(e.type,e.memoizedProps)),t&&(t=Be)){if(ca(e))throw Yd(),Error(T(418));for(;t;)Qd(e,t),t=Bt(t.nextSibling)}if(ju(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(T(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Be=Bt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Be=null}}else Be=Fe?Bt(e.stateNode.nextSibling):null;return!0}function Yd(){for(var e=Be;e;)e=Bt(e.nextSibling)}function nn(){Be=Fe=null,X=!1}function hl(e){it===null?it=[e]:it.push(e)}var Cg=Ct.ReactCurrentBatchConfig;function wn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(T(309));var n=r.stateNode}if(!n)throw Error(T(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(T(284));if(!r._owner)throw Error(T(290,e))}return e}function Rs(e,t){throw e=Object.prototype.toString.call(t),Error(T(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ou(e){var t=e._init;return t(e._payload)}function Xd(e){function t(g,p){if(e){var y=g.deletions;y===null?(g.deletions=[p],g.flags|=16):y.push(p)}}function r(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function n(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function s(g,p){return g=qt(g,p),g.index=0,g.sibling=null,g}function i(g,p,y){return g.index=y,e?(y=g.alternate,y!==null?(y=y.index,y<p?(g.flags|=2,p):y):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,p,y,_){return p===null||p.tag!==6?(p=xo(y,g.mode,_),p.return=g,p):(p=s(p,y),p.return=g,p)}function l(g,p,y,_){var S=y.type;return S===Ir?c(g,p,y.props.children,_,y.key):p!==null&&(p.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ot&&Ou(S)===p.type)?(_=s(p,y.props),_.ref=wn(g,p,y),_.return=g,_):(_=Xs(y.type,y.key,y.props,null,g.mode,_),_.ref=wn(g,p,y),_.return=g,_)}function u(g,p,y,_){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=ko(y,g.mode,_),p.return=g,p):(p=s(p,y.children||[]),p.return=g,p)}function c(g,p,y,_,S){return p===null||p.tag!==7?(p=fr(y,g.mode,_,S),p.return=g,p):(p=s(p,y),p.return=g,p)}function d(g,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=xo(""+p,g.mode,y),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case _s:return y=Xs(p.type,p.key,p.props,null,g.mode,y),y.ref=wn(g,null,p),y.return=g,y;case $r:return p=ko(p,g.mode,y),p.return=g,p;case Ot:var _=p._init;return d(g,_(p._payload),y)}if(Sn(p)||pn(p))return p=fr(p,g.mode,y,null),p.return=g,p;Rs(g,p)}return null}function f(g,p,y,_){var S=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:a(g,p,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case _s:return y.key===S?l(g,p,y,_):null;case $r:return y.key===S?u(g,p,y,_):null;case Ot:return S=y._init,f(g,p,S(y._payload),_)}if(Sn(y)||pn(y))return S!==null?null:c(g,p,y,_,null);Rs(g,y)}return null}function m(g,p,y,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(y)||null,a(p,g,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case _s:return g=g.get(_.key===null?y:_.key)||null,l(p,g,_,S);case $r:return g=g.get(_.key===null?y:_.key)||null,u(p,g,_,S);case Ot:var x=_._init;return m(g,p,y,x(_._payload),S)}if(Sn(_)||pn(_))return g=g.get(y)||null,c(p,g,_,S,null);Rs(p,_)}return null}function v(g,p,y,_){for(var S=null,x=null,E=p,C=p=0,M=null;E!==null&&C<y.length;C++){E.index>C?(M=E,E=null):M=E.sibling;var I=f(g,E,y[C],_);if(I===null){E===null&&(E=M);break}e&&E&&I.alternate===null&&t(g,E),p=i(I,p,C),x===null?S=I:x.sibling=I,x=I,E=M}if(C===y.length)return r(g,E),X&&nr(g,C),S;if(E===null){for(;C<y.length;C++)E=d(g,y[C],_),E!==null&&(p=i(E,p,C),x===null?S=E:x.sibling=E,x=E);return X&&nr(g,C),S}for(E=n(g,E);C<y.length;C++)M=m(E,g,C,y[C],_),M!==null&&(e&&M.alternate!==null&&E.delete(M.key===null?C:M.key),p=i(M,p,C),x===null?S=M:x.sibling=M,x=M);return e&&E.forEach(function(be){return t(g,be)}),X&&nr(g,C),S}function w(g,p,y,_){var S=pn(y);if(typeof S!="function")throw Error(T(150));if(y=S.call(y),y==null)throw Error(T(151));for(var x=S=null,E=p,C=p=0,M=null,I=y.next();E!==null&&!I.done;C++,I=y.next()){E.index>C?(M=E,E=null):M=E.sibling;var be=f(g,E,I.value,_);if(be===null){E===null&&(E=M);break}e&&E&&be.alternate===null&&t(g,E),p=i(be,p,C),x===null?S=be:x.sibling=be,x=be,E=M}if(I.done)return r(g,E),X&&nr(g,C),S;if(E===null){for(;!I.done;C++,I=y.next())I=d(g,I.value,_),I!==null&&(p=i(I,p,C),x===null?S=I:x.sibling=I,x=I);return X&&nr(g,C),S}for(E=n(g,E);!I.done;C++,I=y.next())I=m(E,g,C,I.value,_),I!==null&&(e&&I.alternate!==null&&E.delete(I.key===null?C:I.key),p=i(I,p,C),x===null?S=I:x.sibling=I,x=I);return e&&E.forEach(function(Ke){return t(g,Ke)}),X&&nr(g,C),S}function k(g,p,y,_){if(typeof y=="object"&&y!==null&&y.type===Ir&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case _s:e:{for(var S=y.key,x=p;x!==null;){if(x.key===S){if(S=y.type,S===Ir){if(x.tag===7){r(g,x.sibling),p=s(x,y.props.children),p.return=g,g=p;break e}}else if(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ot&&Ou(S)===x.type){r(g,x.sibling),p=s(x,y.props),p.ref=wn(g,x,y),p.return=g,g=p;break e}r(g,x);break}else t(g,x);x=x.sibling}y.type===Ir?(p=fr(y.props.children,g.mode,_,y.key),p.return=g,g=p):(_=Xs(y.type,y.key,y.props,null,g.mode,_),_.ref=wn(g,p,y),_.return=g,g=_)}return o(g);case $r:e:{for(x=y.key;p!==null;){if(p.key===x)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){r(g,p.sibling),p=s(p,y.children||[]),p.return=g,g=p;break e}else{r(g,p);break}else t(g,p);p=p.sibling}p=ko(y,g.mode,_),p.return=g,g=p}return o(g);case Ot:return x=y._init,k(g,p,x(y._payload),_)}if(Sn(y))return v(g,p,y,_);if(pn(y))return w(g,p,y,_);Rs(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(r(g,p.sibling),p=s(p,y),p.return=g,g=p):(r(g,p),p=xo(y,g.mode,_),p.return=g,g=p),o(g)):r(g,p)}return k}var sn=Xd(!0),Zd=Xd(!1),pi=Jt(null),gi=null,Vr=null,fl=null;function pl(){fl=Vr=gi=null}function gl(e){var t=pi.current;Y(pi),e._currentValue=t}function ha(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Yr(e,t){gi=e,fl=Vr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ae=!0),e.firstContext=null)}function Ye(e){var t=e._currentValue;if(fl!==e)if(e={context:e,memoizedValue:t,next:null},Vr===null){if(gi===null)throw Error(T(308));Vr=e,gi.dependencies={lanes:0,firstContext:e}}else Vr=Vr.next=e;return t}var ur=null;function ml(e){ur===null?ur=[e]:ur.push(e)}function eh(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,ml(t)):(r.next=s.next,s.next=r),t.interleaved=r,St(e,n)}function St(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Nt=!1;function yl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function th(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ft(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,q&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,St(e,r)}return s=n.interleaved,s===null?(t.next=t,ml(n)):(t.next=s.next,s.next=t),n.interleaved=t,St(e,r)}function Ks(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,rl(e,r)}}function Nu(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function mi(e,t,r,n){var s=e.updateQueue;Nt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,c=u=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((n&f)===f){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,w=a;switch(f=t,m=r,w.tag){case 1:if(v=w.payload,typeof v=="function"){d=v.call(m,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,f=typeof v=="function"?v.call(m,d,f):v,f==null)break e;d=re({},d,f);break e;case 2:Nt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=d):c=c.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(c===null&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);vr|=o,e.lanes=o,e.memoizedState=d}}function Ru(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(T(191,s));s.call(n)}}}var gs={},pt=Jt(gs),Yn=Jt(gs),Xn=Jt(gs);function cr(e){if(e===gs)throw Error(T(174));return e}function vl(e,t){switch(J(Xn,t),J(Yn,e),J(pt,gs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ko(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ko(t,e)}Y(pt),J(pt,t)}function on(){Y(pt),Y(Yn),Y(Xn)}function rh(e){cr(Xn.current);var t=cr(pt.current),r=Ko(t,e.type);t!==r&&(J(Yn,e),J(pt,r))}function wl(e){Yn.current===e&&(Y(pt),Y(Yn))}var ee=Jt(0);function yi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var go=[];function _l(){for(var e=0;e<go.length;e++)go[e]._workInProgressVersionPrimary=null;go.length=0}var Hs=Ct.ReactCurrentDispatcher,mo=Ct.ReactCurrentBatchConfig,yr=0,te=null,de=null,ge=null,vi=!1,An=!1,Zn=0,Tg=0;function Se(){throw Error(T(321))}function xl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!lt(e[r],t[r]))return!1;return!0}function kl(e,t,r,n,s,i){if(yr=i,te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Hs.current=e===null||e.memoizedState===null?Rg:Pg,e=r(n,s),An){i=0;do{if(An=!1,Zn=0,25<=i)throw Error(T(301));i+=1,ge=de=null,t.updateQueue=null,Hs.current=Ag,e=r(n,s)}while(An)}if(Hs.current=wi,t=de!==null&&de.next!==null,yr=0,ge=de=te=null,vi=!1,t)throw Error(T(300));return e}function bl(){var e=Zn!==0;return Zn=0,e}function ct(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ge===null?te.memoizedState=ge=e:ge=ge.next=e,ge}function Xe(){if(de===null){var e=te.alternate;e=e!==null?e.memoizedState:null}else e=de.next;var t=ge===null?te.memoizedState:ge.next;if(t!==null)ge=t,de=e;else{if(e===null)throw Error(T(310));de=e,e={memoizedState:de.memoizedState,baseState:de.baseState,baseQueue:de.baseQueue,queue:de.queue,next:null},ge===null?te.memoizedState=ge=e:ge=ge.next=e}return ge}function es(e,t){return typeof t=="function"?t(e):t}function yo(e){var t=Xe(),r=t.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=e;var n=de,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((yr&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=n):l=l.next=d,te.lanes|=c,vr|=c}u=u.next}while(u!==null&&u!==i);l===null?o=n:l.next=a,lt(n,t.memoizedState)||(Ae=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,te.lanes|=i,vr|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function vo(e){var t=Xe(),r=t.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);lt(i,t.memoizedState)||(Ae=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function nh(){}function sh(e,t){var r=te,n=Xe(),s=t(),i=!lt(n.memoizedState,s);if(i&&(n.memoizedState=s,Ae=!0),n=n.queue,Sl(ah.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||ge!==null&&ge.memoizedState.tag&1){if(r.flags|=2048,ts(9,oh.bind(null,r,n,s,t),void 0,null),me===null)throw Error(T(349));yr&30||ih(r,t,s)}return s}function ih(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function oh(e,t,r,n){t.value=r,t.getSnapshot=n,lh(t)&&uh(e)}function ah(e,t,r){return r(function(){lh(t)&&uh(e)})}function lh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!lt(e,r)}catch{return!0}}function uh(e){var t=St(e,1);t!==null&&at(t,e,1,-1)}function Pu(e){var t=ct();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:e},t.queue=e,e=e.dispatch=Ng.bind(null,te,e),[t.memoizedState,e]}function ts(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function ch(){return Xe().memoizedState}function Gs(e,t,r,n){var s=ct();te.flags|=e,s.memoizedState=ts(1|t,r,void 0,n===void 0?null:n)}function Ii(e,t,r,n){var s=Xe();n=n===void 0?null:n;var i=void 0;if(de!==null){var o=de.memoizedState;if(i=o.destroy,n!==null&&xl(n,o.deps)){s.memoizedState=ts(t,r,i,n);return}}te.flags|=e,s.memoizedState=ts(1|t,r,i,n)}function Au(e,t){return Gs(8390656,8,e,t)}function Sl(e,t){return Ii(2048,8,e,t)}function dh(e,t){return Ii(4,2,e,t)}function hh(e,t){return Ii(4,4,e,t)}function fh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ph(e,t,r){return r=r!=null?r.concat([e]):null,Ii(4,4,fh.bind(null,t,e),r)}function El(){}function gh(e,t){var r=Xe();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&xl(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function mh(e,t){var r=Xe();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&xl(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function yh(e,t,r){return yr&21?(lt(r,t)||(r=kd(),te.lanes|=r,vr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ae=!0),e.memoizedState=r)}function jg(e,t){var r=H;H=r!==0&&4>r?r:4,e(!0);var n=mo.transition;mo.transition={};try{e(!1),t()}finally{H=r,mo.transition=n}}function vh(){return Xe().memoizedState}function Og(e,t,r){var n=Wt(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},wh(e))_h(t,r);else if(r=eh(e,t,r,n),r!==null){var s=Oe();at(r,e,n,s),xh(r,t,n)}}function Ng(e,t,r){var n=Wt(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(wh(e))_h(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,lt(a,o)){var l=t.interleaved;l===null?(s.next=s,ml(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}r=eh(e,t,s,n),r!==null&&(s=Oe(),at(r,e,n,s),xh(r,t,n))}}function wh(e){var t=e.alternate;return e===te||t!==null&&t===te}function _h(e,t){An=vi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function xh(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,rl(e,r)}}var wi={readContext:Ye,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useInsertionEffect:Se,useLayoutEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useMutableSource:Se,useSyncExternalStore:Se,useId:Se,unstable_isNewReconciler:!1},Rg={readContext:Ye,useCallback:function(e,t){return ct().memoizedState=[e,t===void 0?null:t],e},useContext:Ye,useEffect:Au,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Gs(4194308,4,fh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Gs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Gs(4,2,e,t)},useMemo:function(e,t){var r=ct();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ct();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Og.bind(null,te,e),[n.memoizedState,e]},useRef:function(e){var t=ct();return e={current:e},t.memoizedState=e},useState:Pu,useDebugValue:El,useDeferredValue:function(e){return ct().memoizedState=e},useTransition:function(){var e=Pu(!1),t=e[0];return e=jg.bind(null,e[1]),ct().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=te,s=ct();if(X){if(r===void 0)throw Error(T(407));r=r()}else{if(r=t(),me===null)throw Error(T(349));yr&30||ih(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Au(ah.bind(null,n,i,e),[e]),n.flags|=2048,ts(9,oh.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=ct(),t=me.identifierPrefix;if(X){var r=_t,n=wt;r=(n&~(1<<32-ot(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Zn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Tg++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Pg={readContext:Ye,useCallback:gh,useContext:Ye,useEffect:Sl,useImperativeHandle:ph,useInsertionEffect:dh,useLayoutEffect:hh,useMemo:mh,useReducer:yo,useRef:ch,useState:function(){return yo(es)},useDebugValue:El,useDeferredValue:function(e){var t=Xe();return yh(t,de.memoizedState,e)},useTransition:function(){var e=yo(es)[0],t=Xe().memoizedState;return[e,t]},useMutableSource:nh,useSyncExternalStore:sh,useId:vh,unstable_isNewReconciler:!1},Ag={readContext:Ye,useCallback:gh,useContext:Ye,useEffect:Sl,useImperativeHandle:ph,useInsertionEffect:dh,useLayoutEffect:hh,useMemo:mh,useReducer:vo,useRef:ch,useState:function(){return vo(es)},useDebugValue:El,useDeferredValue:function(e){var t=Xe();return de===null?t.memoizedState=e:yh(t,de.memoizedState,e)},useTransition:function(){var e=vo(es)[0],t=Xe().memoizedState;return[e,t]},useMutableSource:nh,useSyncExternalStore:sh,useId:vh,unstable_isNewReconciler:!1};function tt(e,t){if(e&&e.defaultProps){t=re({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function fa(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:re({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Li={isMounted:function(e){return(e=e._reactInternals)?xr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Oe(),s=Wt(e),i=xt(n,s);i.payload=t,r!=null&&(i.callback=r),t=Ft(e,i,s),t!==null&&(at(t,e,s,n),Ks(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Oe(),s=Wt(e),i=xt(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Ft(e,i,s),t!==null&&(at(t,e,s,n),Ks(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Oe(),n=Wt(e),s=xt(r,n);s.tag=2,t!=null&&(s.callback=t),t=Ft(e,s,n),t!==null&&(at(t,e,n,r),Ks(t,e,n))}};function $u(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Hn(r,n)||!Hn(s,i):!0}function kh(e,t,r){var n=!1,s=Ht,i=t.contextType;return typeof i=="object"&&i!==null?i=Ye(i):(s=Ie(t)?gr:Te.current,n=t.contextTypes,i=(n=n!=null)?rn(e,s):Ht),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Li,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Iu(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Li.enqueueReplaceState(t,t.state,null)}function pa(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},yl(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Ye(i):(i=Ie(t)?gr:Te.current,s.context=rn(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(fa(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Li.enqueueReplaceState(s,s.state,null),mi(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function an(e,t){try{var r="",n=t;do r+=ap(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function wo(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ga(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var $g=typeof WeakMap=="function"?WeakMap:Map;function bh(e,t,r){r=xt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){xi||(xi=!0,Ea=n),ga(e,t)},r}function Sh(e,t,r){r=xt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){ga(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){ga(e,t),typeof n!="function"&&(Vt===null?Vt=new Set([this]):Vt.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Lu(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new $g;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Gg.bind(null,e,t,r),t.then(e,e))}function Uu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Du(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=xt(-1,1),t.tag=2,Ft(r,t,1))),r.lanes|=1),e)}var Ig=Ct.ReactCurrentOwner,Ae=!1;function je(e,t,r,n){t.child=e===null?Zd(t,null,r,n):sn(t,e.child,r,n)}function zu(e,t,r,n,s){r=r.render;var i=t.ref;return Yr(t,s),n=kl(e,t,r,n,i,s),r=bl(),e!==null&&!Ae?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Et(e,t,s)):(X&&r&&cl(t),t.flags|=1,je(e,t,n,s),t.child)}function Mu(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Al(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Eh(e,t,i,n,s)):(e=Xs(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Hn,r(o,n)&&e.ref===t.ref)return Et(e,t,s)}return t.flags|=1,e=qt(i,n),e.ref=t.ref,e.return=t,t.child=e}function Eh(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Hn(i,n)&&e.ref===t.ref)if(Ae=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Ae=!0);else return t.lanes=e.lanes,Et(e,t,s)}return ma(e,t,r,n,s)}function Ch(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(qr,De),De|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,J(qr,De),De|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,J(qr,De),De|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,J(qr,De),De|=n;return je(e,t,s,r),t.child}function Th(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ma(e,t,r,n,s){var i=Ie(r)?gr:Te.current;return i=rn(t,i),Yr(t,s),r=kl(e,t,r,n,i,s),n=bl(),e!==null&&!Ae?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Et(e,t,s)):(X&&n&&cl(t),t.flags|=1,je(e,t,r,s),t.child)}function Bu(e,t,r,n,s){if(Ie(r)){var i=!0;di(t)}else i=!1;if(Yr(t,s),t.stateNode===null)Js(e,t),kh(t,r,n),pa(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ye(u):(u=Ie(r)?gr:Te.current,u=rn(t,u));var c=r.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&Iu(t,o,n,u),Nt=!1;var f=t.memoizedState;o.state=f,mi(t,n,o,s),l=t.memoizedState,a!==n||f!==l||$e.current||Nt?(typeof c=="function"&&(fa(t,r,c,n),l=t.memoizedState),(a=Nt||$u(t,r,a,n,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,th(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:tt(t.type,a),o.props=u,d=t.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ye(l):(l=Ie(r)?gr:Te.current,l=rn(t,l));var m=r.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Iu(t,o,n,l),Nt=!1,f=t.memoizedState,o.state=f,mi(t,n,o,s);var v=t.memoizedState;a!==d||f!==v||$e.current||Nt?(typeof m=="function"&&(fa(t,r,m,n),v=t.memoizedState),(u=Nt||$u(t,r,u,n,f,v,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return ya(e,t,r,n,i,s)}function ya(e,t,r,n,s,i){Th(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&Cu(t,r,!1),Et(e,t,i);n=t.stateNode,Ig.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=sn(t,e.child,null,i),t.child=sn(t,null,a,i)):je(e,t,a,i),t.memoizedState=n.state,s&&Cu(t,r,!0),t.child}function jh(e){var t=e.stateNode;t.pendingContext?Eu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Eu(e,t.context,!1),vl(e,t.containerInfo)}function Fu(e,t,r,n,s){return nn(),hl(s),t.flags|=256,je(e,t,r,n),t.child}var va={dehydrated:null,treeContext:null,retryLane:0};function wa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Oh(e,t,r){var n=t.pendingProps,s=ee.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),J(ee,s&1),e===null)return da(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=zi(o,n,0,null),e=fr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=wa(r),t.memoizedState=va,e):Cl(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Lg(e,t,o,n,a,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=qt(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=qt(a,i):(i=fr(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?wa(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=va,n}return i=e.child,e=i.sibling,n=qt(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Cl(e,t){return t=zi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ps(e,t,r,n){return n!==null&&hl(n),sn(t,e.child,null,r),e=Cl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Lg(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=wo(Error(T(422))),Ps(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=zi({mode:"visible",children:n.children},s,0,null),i=fr(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&sn(t,e.child,null,o),t.child.memoizedState=wa(o),t.memoizedState=va,i);if(!(t.mode&1))return Ps(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(T(419)),n=wo(i,n,void 0),Ps(e,t,o,n)}if(a=(o&e.childLanes)!==0,Ae||a){if(n=me,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,St(e,s),at(n,e,s,-1))}return Pl(),n=wo(Error(T(421))),Ps(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Jg.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Be=Bt(s.nextSibling),Fe=t,X=!0,it=null,e!==null&&(He[Ge++]=wt,He[Ge++]=_t,He[Ge++]=mr,wt=e.id,_t=e.overflow,mr=t),t=Cl(t,n.children),t.flags|=4096,t)}function Vu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ha(e.return,t,r)}function _o(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Nh(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(je(e,t,n.children,r),n=ee.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vu(e,r,t);else if(e.tag===19)Vu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(J(ee,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&yi(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),_o(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&yi(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}_o(t,!0,r,null,i);break;case"together":_o(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Js(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Et(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),vr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(T(153));if(t.child!==null){for(e=t.child,r=qt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=qt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Ug(e,t,r){switch(t.tag){case 3:jh(t),nn();break;case 5:rh(t);break;case 1:Ie(t.type)&&di(t);break;case 4:vl(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;J(pi,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(J(ee,ee.current&1),t.flags|=128,null):r&t.child.childLanes?Oh(e,t,r):(J(ee,ee.current&1),e=Et(e,t,r),e!==null?e.sibling:null);J(ee,ee.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Nh(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),J(ee,ee.current),n)break;return null;case 22:case 23:return t.lanes=0,Ch(e,t,r)}return Et(e,t,r)}var Rh,_a,Ph,Ah;Rh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};_a=function(){};Ph=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,cr(pt.current);var i=null;switch(r){case"input":s=Fo(e,s),n=Fo(e,n),i=[];break;case"select":s=re({},s,{value:void 0}),n=re({},n,{value:void 0}),i=[];break;case"textarea":s=qo(e,s),n=qo(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ui)}Ho(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Mn.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(a=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Mn.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Q("scroll",e),i||a===l||(i=[])):(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Ah=function(e,t,r,n){r!==n&&(t.flags|=4)};function _n(e,t){if(!X)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ee(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Dg(e,t,r){var n=t.pendingProps;switch(dl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ee(t),null;case 1:return Ie(t.type)&&ci(),Ee(t),null;case 3:return n=t.stateNode,on(),Y($e),Y(Te),_l(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ns(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,it!==null&&(ja(it),it=null))),_a(e,t),Ee(t),null;case 5:wl(t);var s=cr(Xn.current);if(r=t.type,e!==null&&t.stateNode!=null)Ph(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(T(166));return Ee(t),null}if(e=cr(pt.current),Ns(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ht]=t,n[Qn]=i,e=(t.mode&1)!==0,r){case"dialog":Q("cancel",n),Q("close",n);break;case"iframe":case"object":case"embed":Q("load",n);break;case"video":case"audio":for(s=0;s<Cn.length;s++)Q(Cn[s],n);break;case"source":Q("error",n);break;case"img":case"image":case"link":Q("error",n),Q("load",n);break;case"details":Q("toggle",n);break;case"input":Xl(n,i),Q("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Q("invalid",n);break;case"textarea":eu(n,i),Q("invalid",n)}Ho(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&Os(n.textContent,a,e),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Os(n.textContent,a,e),s=["children",""+a]):Mn.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Q("scroll",n)}switch(r){case"input":xs(n),Zl(n,i,!0);break;case"textarea":xs(n),tu(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=ui)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ad(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ht]=t,e[Qn]=n,Rh(e,t,!1,!1),t.stateNode=e;e:{switch(o=Go(r,n),r){case"dialog":Q("cancel",e),Q("close",e),s=n;break;case"iframe":case"object":case"embed":Q("load",e),s=n;break;case"video":case"audio":for(s=0;s<Cn.length;s++)Q(Cn[s],e);s=n;break;case"source":Q("error",e),s=n;break;case"img":case"image":case"link":Q("error",e),Q("load",e),s=n;break;case"details":Q("toggle",e),s=n;break;case"input":Xl(e,n),s=Fo(e,n),Q("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=re({},n,{value:void 0}),Q("invalid",e);break;case"textarea":eu(e,n),s=qo(e,n),Q("invalid",e);break;default:s=n}Ho(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?cd(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ld(e,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Bn(e,l):typeof l=="number"&&Bn(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Mn.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Q("scroll",e):l!=null&&Qa(e,i,l,o))}switch(r){case"input":xs(e),Zl(e,n,!1);break;case"textarea":xs(e),tu(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Kt(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Hr(e,!!n.multiple,i,!1):n.defaultValue!=null&&Hr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ui)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ee(t),null;case 6:if(e&&t.stateNode!=null)Ah(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(T(166));if(r=cr(Xn.current),cr(pt.current),Ns(t)){if(n=t.stateNode,r=t.memoizedProps,n[ht]=t,(i=n.nodeValue!==r)&&(e=Fe,e!==null))switch(e.tag){case 3:Os(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Os(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ht]=t,t.stateNode=n}return Ee(t),null;case 13:if(Y(ee),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(X&&Be!==null&&t.mode&1&&!(t.flags&128))Yd(),nn(),t.flags|=98560,i=!1;else if(i=Ns(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(T(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(T(317));i[ht]=t}else nn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ee(t),i=!1}else it!==null&&(ja(it),it=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ee.current&1?he===0&&(he=3):Pl())),t.updateQueue!==null&&(t.flags|=4),Ee(t),null);case 4:return on(),_a(e,t),e===null&&Gn(t.stateNode.containerInfo),Ee(t),null;case 10:return gl(t.type._context),Ee(t),null;case 17:return Ie(t.type)&&ci(),Ee(t),null;case 19:if(Y(ee),i=t.memoizedState,i===null)return Ee(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)_n(i,!1);else{if(he!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=yi(e),o!==null){for(t.flags|=128,_n(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return J(ee,ee.current&1|2),t.child}e=e.sibling}i.tail!==null&&ie()>ln&&(t.flags|=128,n=!0,_n(i,!1),t.lanes=4194304)}else{if(!n)if(e=yi(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),_n(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!X)return Ee(t),null}else 2*ie()-i.renderingStartTime>ln&&r!==1073741824&&(t.flags|=128,n=!0,_n(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ie(),t.sibling=null,r=ee.current,J(ee,n?r&1|2:r&1),t):(Ee(t),null);case 22:case 23:return Rl(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?De&1073741824&&(Ee(t),t.subtreeFlags&6&&(t.flags|=8192)):Ee(t),null;case 24:return null;case 25:return null}throw Error(T(156,t.tag))}function zg(e,t){switch(dl(t),t.tag){case 1:return Ie(t.type)&&ci(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return on(),Y($e),Y(Te),_l(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wl(t),null;case 13:if(Y(ee),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(T(340));nn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Y(ee),null;case 4:return on(),null;case 10:return gl(t.type._context),null;case 22:case 23:return Rl(),null;case 24:return null;default:return null}}var As=!1,Ce=!1,Mg=typeof WeakSet=="function"?WeakSet:Set,R=null;function Wr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){se(e,t,n)}else r.current=null}function xa(e,t,r){try{r()}catch(n){se(e,t,n)}}var Wu=!1;function Bg(e,t){if(sa=oi,e=Dd(),ul(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=e,f=null;t:for(;;){for(var m;d!==r||s!==0&&d.nodeType!==3||(a=o+s),d!==i||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===e)break t;if(f===r&&++u===s&&(a=o),f===i&&++c===n&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(ia={focusedElem:e,selectionRange:r},oi=!1,R=t;R!==null;)if(t=R,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,R=e;else for(;R!==null;){t=R;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,k=v.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?w:tt(t.type,w),k);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(_){se(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,R=e;break}R=t.return}return v=Wu,Wu=!1,v}function $n(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&xa(t,r,i)}s=s.next}while(s!==n)}}function Ui(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ka(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function $h(e){var t=e.alternate;t!==null&&(e.alternate=null,$h(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ht],delete t[Qn],delete t[la],delete t[bg],delete t[Sg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ih(e){return e.tag===5||e.tag===3||e.tag===4}function qu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ih(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ba(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ui));else if(n!==4&&(e=e.child,e!==null))for(ba(e,t,r),e=e.sibling;e!==null;)ba(e,t,r),e=e.sibling}function Sa(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Sa(e,t,r),e=e.sibling;e!==null;)Sa(e,t,r),e=e.sibling}var _e=null,nt=!1;function jt(e,t,r){for(r=r.child;r!==null;)Lh(e,t,r),r=r.sibling}function Lh(e,t,r){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(Oi,r)}catch{}switch(r.tag){case 5:Ce||Wr(r,t);case 6:var n=_e,s=nt;_e=null,jt(e,t,r),_e=n,nt=s,_e!==null&&(nt?(e=_e,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):_e.removeChild(r.stateNode));break;case 18:_e!==null&&(nt?(e=_e,r=r.stateNode,e.nodeType===8?fo(e.parentNode,r):e.nodeType===1&&fo(e,r),qn(e)):fo(_e,r.stateNode));break;case 4:n=_e,s=nt,_e=r.stateNode.containerInfo,nt=!0,jt(e,t,r),_e=n,nt=s;break;case 0:case 11:case 14:case 15:if(!Ce&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&xa(r,t,o),s=s.next}while(s!==n)}jt(e,t,r);break;case 1:if(!Ce&&(Wr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){se(r,t,a)}jt(e,t,r);break;case 21:jt(e,t,r);break;case 22:r.mode&1?(Ce=(n=Ce)||r.memoizedState!==null,jt(e,t,r),Ce=n):jt(e,t,r);break;default:jt(e,t,r)}}function Ku(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Mg),t.forEach(function(n){var s=Qg.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Ze(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:_e=a.stateNode,nt=!1;break e;case 3:_e=a.stateNode.containerInfo,nt=!0;break e;case 4:_e=a.stateNode.containerInfo,nt=!0;break e}a=a.return}if(_e===null)throw Error(T(160));Lh(i,o,s),_e=null,nt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){se(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Uh(t,e),t=t.sibling}function Uh(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ze(t,e),ut(e),n&4){try{$n(3,e,e.return),Ui(3,e)}catch(w){se(e,e.return,w)}try{$n(5,e,e.return)}catch(w){se(e,e.return,w)}}break;case 1:Ze(t,e),ut(e),n&512&&r!==null&&Wr(r,r.return);break;case 5:if(Ze(t,e),ut(e),n&512&&r!==null&&Wr(r,r.return),e.flags&32){var s=e.stateNode;try{Bn(s,"")}catch(w){se(e,e.return,w)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&id(s,i),Go(a,o);var u=Go(a,i);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?cd(s,d):c==="dangerouslySetInnerHTML"?ld(s,d):c==="children"?Bn(s,d):Qa(s,c,d,u)}switch(a){case"input":Vo(s,i);break;case"textarea":od(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Hr(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Hr(s,!!i.multiple,i.defaultValue,!0):Hr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Qn]=i}catch(w){se(e,e.return,w)}}break;case 6:if(Ze(t,e),ut(e),n&4){if(e.stateNode===null)throw Error(T(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){se(e,e.return,w)}}break;case 3:if(Ze(t,e),ut(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{qn(t.containerInfo)}catch(w){se(e,e.return,w)}break;case 4:Ze(t,e),ut(e);break;case 13:Ze(t,e),ut(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ol=ie())),n&4&&Ku(e);break;case 22:if(c=r!==null&&r.memoizedState!==null,e.mode&1?(Ce=(u=Ce)||c,Ze(t,e),Ce=u):Ze(t,e),ut(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(R=e,c=e.child;c!==null;){for(d=R=c;R!==null;){switch(f=R,m=f.child,f.tag){case 0:case 11:case 14:case 15:$n(4,f,f.return);break;case 1:Wr(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(w){se(n,r,w)}}break;case 5:Wr(f,f.return);break;case 22:if(f.memoizedState!==null){Gu(d);continue}}m!==null?(m.return=f,R=m):Gu(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ud("display",o))}catch(w){se(e,e.return,w)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){se(e,e.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ze(t,e),ut(e),n&4&&Ku(e);break;case 21:break;default:Ze(t,e),ut(e)}}function ut(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Ih(r)){var n=r;break e}r=r.return}throw Error(T(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Bn(s,""),n.flags&=-33);var i=qu(e);Sa(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=qu(e);ba(e,a,o);break;default:throw Error(T(161))}}catch(l){se(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Fg(e,t,r){R=e,Dh(e)}function Dh(e,t,r){for(var n=(e.mode&1)!==0;R!==null;){var s=R,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||As;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ce;a=As;var u=Ce;if(As=o,(Ce=l)&&!u)for(R=s;R!==null;)o=R,l=o.child,o.tag===22&&o.memoizedState!==null?Ju(s):l!==null?(l.return=o,R=l):Ju(s);for(;i!==null;)R=i,Dh(i),i=i.sibling;R=s,As=a,Ce=u}Hu(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,R=i):Hu(e)}}function Hu(e){for(;R!==null;){var t=R;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ce||Ui(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ce)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:tt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Ru(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Ru(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&qn(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}Ce||t.flags&512&&ka(t)}catch(f){se(t,t.return,f)}}if(t===e){R=null;break}if(r=t.sibling,r!==null){r.return=t.return,R=r;break}R=t.return}}function Gu(e){for(;R!==null;){var t=R;if(t===e){R=null;break}var r=t.sibling;if(r!==null){r.return=t.return,R=r;break}R=t.return}}function Ju(e){for(;R!==null;){var t=R;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ui(4,t)}catch(l){se(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(l){se(t,s,l)}}var i=t.return;try{ka(t)}catch(l){se(t,i,l)}break;case 5:var o=t.return;try{ka(t)}catch(l){se(t,o,l)}}}catch(l){se(t,t.return,l)}if(t===e){R=null;break}var a=t.sibling;if(a!==null){a.return=t.return,R=a;break}R=t.return}}var Vg=Math.ceil,_i=Ct.ReactCurrentDispatcher,Tl=Ct.ReactCurrentOwner,Qe=Ct.ReactCurrentBatchConfig,q=0,me=null,ae=null,xe=0,De=0,qr=Jt(0),he=0,rs=null,vr=0,Di=0,jl=0,In=null,Pe=null,Ol=0,ln=1/0,mt=null,xi=!1,Ea=null,Vt=null,$s=!1,Lt=null,ki=0,Ln=0,Ca=null,Qs=-1,Ys=0;function Oe(){return q&6?ie():Qs!==-1?Qs:Qs=ie()}function Wt(e){return e.mode&1?q&2&&xe!==0?xe&-xe:Cg.transition!==null?(Ys===0&&(Ys=kd()),Ys):(e=H,e!==0||(e=window.event,e=e===void 0?16:Od(e.type)),e):1}function at(e,t,r,n){if(50<Ln)throw Ln=0,Ca=null,Error(T(185));hs(e,r,n),(!(q&2)||e!==me)&&(e===me&&(!(q&2)&&(Di|=r),he===4&&At(e,xe)),Le(e,n),r===1&&q===0&&!(t.mode&1)&&(ln=ie()+500,$i&&Qt()))}function Le(e,t){var r=e.callbackNode;Cp(e,t);var n=ii(e,e===me?xe:0);if(n===0)r!==null&&su(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&su(r),t===1)e.tag===0?Eg(Qu.bind(null,e)):Gd(Qu.bind(null,e)),xg(function(){!(q&6)&&Qt()}),r=null;else{switch(bd(n)){case 1:r=tl;break;case 4:r=_d;break;case 16:r=si;break;case 536870912:r=xd;break;default:r=si}r=Kh(r,zh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function zh(e,t){if(Qs=-1,Ys=0,q&6)throw Error(T(327));var r=e.callbackNode;if(Xr()&&e.callbackNode!==r)return null;var n=ii(e,e===me?xe:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=bi(e,n);else{t=n;var s=q;q|=2;var i=Bh();(me!==e||xe!==t)&&(mt=null,ln=ie()+500,hr(e,t));do try{Kg();break}catch(a){Mh(e,a)}while(!0);pl(),_i.current=i,q=s,ae!==null?t=0:(me=null,xe=0,t=he)}if(t!==0){if(t===2&&(s=Zo(e),s!==0&&(n=s,t=Ta(e,s))),t===1)throw r=rs,hr(e,0),At(e,n),Le(e,ie()),r;if(t===6)At(e,n);else{if(s=e.current.alternate,!(n&30)&&!Wg(s)&&(t=bi(e,n),t===2&&(i=Zo(e),i!==0&&(n=i,t=Ta(e,i))),t===1))throw r=rs,hr(e,0),At(e,n),Le(e,ie()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(T(345));case 2:sr(e,Pe,mt);break;case 3:if(At(e,n),(n&130023424)===n&&(t=Ol+500-ie(),10<t)){if(ii(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Oe(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=aa(sr.bind(null,e,Pe,mt),t);break}sr(e,Pe,mt);break;case 4:if(At(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-ot(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=ie()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Vg(n/1960))-n,10<n){e.timeoutHandle=aa(sr.bind(null,e,Pe,mt),n);break}sr(e,Pe,mt);break;case 5:sr(e,Pe,mt);break;default:throw Error(T(329))}}}return Le(e,ie()),e.callbackNode===r?zh.bind(null,e):null}function Ta(e,t){var r=In;return e.current.memoizedState.isDehydrated&&(hr(e,t).flags|=256),e=bi(e,t),e!==2&&(t=Pe,Pe=r,t!==null&&ja(t)),e}function ja(e){Pe===null?Pe=e:Pe.push.apply(Pe,e)}function Wg(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!lt(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function At(e,t){for(t&=~jl,t&=~Di,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),n=1<<r;e[r]=-1,t&=~n}}function Qu(e){if(q&6)throw Error(T(327));Xr();var t=ii(e,0);if(!(t&1))return Le(e,ie()),null;var r=bi(e,t);if(e.tag!==0&&r===2){var n=Zo(e);n!==0&&(t=n,r=Ta(e,n))}if(r===1)throw r=rs,hr(e,0),At(e,t),Le(e,ie()),r;if(r===6)throw Error(T(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sr(e,Pe,mt),Le(e,ie()),null}function Nl(e,t){var r=q;q|=1;try{return e(t)}finally{q=r,q===0&&(ln=ie()+500,$i&&Qt())}}function wr(e){Lt!==null&&Lt.tag===0&&!(q&6)&&Xr();var t=q;q|=1;var r=Qe.transition,n=H;try{if(Qe.transition=null,H=1,e)return e()}finally{H=n,Qe.transition=r,q=t,!(q&6)&&Qt()}}function Rl(){De=qr.current,Y(qr)}function hr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,_g(r)),ae!==null)for(r=ae.return;r!==null;){var n=r;switch(dl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ci();break;case 3:on(),Y($e),Y(Te),_l();break;case 5:wl(n);break;case 4:on();break;case 13:Y(ee);break;case 19:Y(ee);break;case 10:gl(n.type._context);break;case 22:case 23:Rl()}r=r.return}if(me=e,ae=e=qt(e.current,null),xe=De=t,he=0,rs=null,jl=Di=vr=0,Pe=In=null,ur!==null){for(t=0;t<ur.length;t++)if(r=ur[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}ur=null}return e}function Mh(e,t){do{var r=ae;try{if(pl(),Hs.current=wi,vi){for(var n=te.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}vi=!1}if(yr=0,ge=de=te=null,An=!1,Zn=0,Tl.current=null,r===null||r.return===null){he=1,rs=t,ae=null;break}e:{var i=e,o=r.return,a=r,l=t;if(t=xe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=Uu(o);if(m!==null){m.flags&=-257,Du(m,o,a,i,t),m.mode&1&&Lu(i,u,t),t=m,l=u;var v=t.updateQueue;if(v===null){var w=new Set;w.add(l),t.updateQueue=w}else v.add(l);break e}else{if(!(t&1)){Lu(i,u,t),Pl();break e}l=Error(T(426))}}else if(X&&a.mode&1){var k=Uu(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Du(k,o,a,i,t),hl(an(l,a));break e}}i=l=an(l,a),he!==4&&(he=2),In===null?In=[i]:In.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=bh(i,l,t);Nu(i,g);break e;case 1:a=l;var p=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Vt===null||!Vt.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=Sh(i,a,t);Nu(i,_);break e}}i=i.return}while(i!==null)}Vh(r)}catch(S){t=S,ae===r&&r!==null&&(ae=r=r.return);continue}break}while(!0)}function Bh(){var e=_i.current;return _i.current=wi,e===null?wi:e}function Pl(){(he===0||he===3||he===2)&&(he=4),me===null||!(vr&268435455)&&!(Di&268435455)||At(me,xe)}function bi(e,t){var r=q;q|=2;var n=Bh();(me!==e||xe!==t)&&(mt=null,hr(e,t));do try{qg();break}catch(s){Mh(e,s)}while(!0);if(pl(),q=r,_i.current=n,ae!==null)throw Error(T(261));return me=null,xe=0,he}function qg(){for(;ae!==null;)Fh(ae)}function Kg(){for(;ae!==null&&!yp();)Fh(ae)}function Fh(e){var t=qh(e.alternate,e,De);e.memoizedProps=e.pendingProps,t===null?Vh(e):ae=t,Tl.current=null}function Vh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=zg(r,t),r!==null){r.flags&=32767,ae=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{he=6,ae=null;return}}else if(r=Dg(r,t,De),r!==null){ae=r;return}if(t=t.sibling,t!==null){ae=t;return}ae=t=e}while(t!==null);he===0&&(he=5)}function sr(e,t,r){var n=H,s=Qe.transition;try{Qe.transition=null,H=1,Hg(e,t,r,n)}finally{Qe.transition=s,H=n}return null}function Hg(e,t,r,n){do Xr();while(Lt!==null);if(q&6)throw Error(T(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(T(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Tp(e,i),e===me&&(ae=me=null,xe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||$s||($s=!0,Kh(si,function(){return Xr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Qe.transition,Qe.transition=null;var o=H;H=1;var a=q;q|=4,Tl.current=null,Bg(e,r),Uh(r,e),fg(ia),oi=!!sa,ia=sa=null,e.current=r,Fg(r),vp(),q=a,H=o,Qe.transition=i}else e.current=r;if($s&&($s=!1,Lt=e,ki=s),i=e.pendingLanes,i===0&&(Vt=null),xp(r.stateNode),Le(e,ie()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(xi)throw xi=!1,e=Ea,Ea=null,e;return ki&1&&e.tag!==0&&Xr(),i=e.pendingLanes,i&1?e===Ca?Ln++:(Ln=0,Ca=e):Ln=0,Qt(),null}function Xr(){if(Lt!==null){var e=bd(ki),t=Qe.transition,r=H;try{if(Qe.transition=null,H=16>e?16:e,Lt===null)var n=!1;else{if(e=Lt,Lt=null,ki=0,q&6)throw Error(T(331));var s=q;for(q|=4,R=e.current;R!==null;){var i=R,o=i.child;if(R.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(R=u;R!==null;){var c=R;switch(c.tag){case 0:case 11:case 15:$n(8,c,i)}var d=c.child;if(d!==null)d.return=c,R=d;else for(;R!==null;){c=R;var f=c.sibling,m=c.return;if($h(c),c===u){R=null;break}if(f!==null){f.return=m,R=f;break}R=m}}}var v=i.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var k=w.sibling;w.sibling=null,w=k}while(w!==null)}}R=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,R=o;else e:for(;R!==null;){if(i=R,i.flags&2048)switch(i.tag){case 0:case 11:case 15:$n(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,R=g;break e}R=i.return}}var p=e.current;for(R=p;R!==null;){o=R;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,R=y;else e:for(o=p;R!==null;){if(a=R,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ui(9,a)}}catch(S){se(a,a.return,S)}if(a===o){R=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,R=_;break e}R=a.return}}if(q=s,Qt(),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(Oi,e)}catch{}n=!0}return n}finally{H=r,Qe.transition=t}}return!1}function Yu(e,t,r){t=an(r,t),t=bh(e,t,1),e=Ft(e,t,1),t=Oe(),e!==null&&(hs(e,1,t),Le(e,t))}function se(e,t,r){if(e.tag===3)Yu(e,e,r);else for(;t!==null;){if(t.tag===3){Yu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Vt===null||!Vt.has(n))){e=an(r,e),e=Sh(t,e,1),t=Ft(t,e,1),e=Oe(),t!==null&&(hs(t,1,e),Le(t,e));break}}t=t.return}}function Gg(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Oe(),e.pingedLanes|=e.suspendedLanes&r,me===e&&(xe&r)===r&&(he===4||he===3&&(xe&130023424)===xe&&500>ie()-Ol?hr(e,0):jl|=r),Le(e,t)}function Wh(e,t){t===0&&(e.mode&1?(t=Ss,Ss<<=1,!(Ss&130023424)&&(Ss=4194304)):t=1);var r=Oe();e=St(e,t),e!==null&&(hs(e,t,r),Le(e,r))}function Jg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Wh(e,r)}function Qg(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(T(314))}n!==null&&n.delete(t),Wh(e,r)}var qh;qh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||$e.current)Ae=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ae=!1,Ug(e,t,r);Ae=!!(e.flags&131072)}else Ae=!1,X&&t.flags&1048576&&Jd(t,fi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Js(e,t),e=t.pendingProps;var s=rn(t,Te.current);Yr(t,r),s=kl(null,t,n,e,s,r);var i=bl();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ie(n)?(i=!0,di(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,yl(t),s.updater=Li,t.stateNode=s,s._reactInternals=t,pa(t,n,e,r),t=ya(null,t,n,!0,i,r)):(t.tag=0,X&&i&&cl(t),je(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Js(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Xg(n),e=tt(n,e),s){case 0:t=ma(null,t,n,e,r);break e;case 1:t=Bu(null,t,n,e,r);break e;case 11:t=zu(null,t,n,e,r);break e;case 14:t=Mu(null,t,n,tt(n.type,e),r);break e}throw Error(T(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),ma(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),Bu(e,t,n,s,r);case 3:e:{if(jh(t),e===null)throw Error(T(387));n=t.pendingProps,i=t.memoizedState,s=i.element,th(e,t),mi(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=an(Error(T(423)),t),t=Fu(e,t,n,r,s);break e}else if(n!==s){s=an(Error(T(424)),t),t=Fu(e,t,n,r,s);break e}else for(Be=Bt(t.stateNode.containerInfo.firstChild),Fe=t,X=!0,it=null,r=Zd(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(nn(),n===s){t=Et(e,t,r);break e}je(e,t,n,r)}t=t.child}return t;case 5:return rh(t),e===null&&da(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,oa(n,s)?o=null:i!==null&&oa(n,i)&&(t.flags|=32),Th(e,t),je(e,t,o,r),t.child;case 6:return e===null&&da(t),null;case 13:return Oh(e,t,r);case 4:return vl(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=sn(t,null,n,r):je(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),zu(e,t,n,s,r);case 7:return je(e,t,t.pendingProps,r),t.child;case 8:return je(e,t,t.pendingProps.children,r),t.child;case 12:return je(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,J(pi,n._currentValue),n._currentValue=o,i!==null)if(lt(i.value,o)){if(i.children===s.children&&!$e.current){t=Et(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=xt(-1,r&-r),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),ha(i.return,r,t),a.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(T(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),ha(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}je(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Yr(t,r),s=Ye(s),n=n(s),t.flags|=1,je(e,t,n,r),t.child;case 14:return n=t.type,s=tt(n,t.pendingProps),s=tt(n.type,s),Mu(e,t,n,s,r);case 15:return Eh(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),Js(e,t),t.tag=1,Ie(n)?(e=!0,di(t)):e=!1,Yr(t,r),kh(t,n,s),pa(t,n,s,r),ya(null,t,n,!0,e,r);case 19:return Nh(e,t,r);case 22:return Ch(e,t,r)}throw Error(T(156,t.tag))};function Kh(e,t){return wd(e,t)}function Yg(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Je(e,t,r,n){return new Yg(e,t,r,n)}function Al(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Xg(e){if(typeof e=="function")return Al(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Xa)return 11;if(e===Za)return 14}return 2}function qt(e,t){var r=e.alternate;return r===null?(r=Je(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Xs(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")Al(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ir:return fr(r.children,s,i,t);case Ya:o=8,s|=8;break;case Do:return e=Je(12,r,t,s|2),e.elementType=Do,e.lanes=i,e;case zo:return e=Je(13,r,t,s),e.elementType=zo,e.lanes=i,e;case Mo:return e=Je(19,r,t,s),e.elementType=Mo,e.lanes=i,e;case rd:return zi(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ed:o=10;break e;case td:o=9;break e;case Xa:o=11;break e;case Za:o=14;break e;case Ot:o=16,n=null;break e}throw Error(T(130,e==null?e:typeof e,""))}return t=Je(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function fr(e,t,r,n){return e=Je(7,e,n,t),e.lanes=r,e}function zi(e,t,r,n){return e=Je(22,e,n,t),e.elementType=rd,e.lanes=r,e.stateNode={isHidden:!1},e}function xo(e,t,r){return e=Je(6,e,null,t),e.lanes=r,e}function ko(e,t,r){return t=Je(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zg(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=to(0),this.expirationTimes=to(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=to(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function $l(e,t,r,n,s,i,o,a,l){return e=new Zg(e,t,r,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Je(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},yl(i),e}function em(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$r,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Hh(e){if(!e)return Ht;e=e._reactInternals;e:{if(xr(e)!==e||e.tag!==1)throw Error(T(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ie(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(T(171))}if(e.tag===1){var r=e.type;if(Ie(r))return Hd(e,r,t)}return t}function Gh(e,t,r,n,s,i,o,a,l){return e=$l(r,n,!0,e,s,i,o,a,l),e.context=Hh(null),r=e.current,n=Oe(),s=Wt(r),i=xt(n,s),i.callback=t??null,Ft(r,i,s),e.current.lanes=s,hs(e,s,n),Le(e,n),e}function Mi(e,t,r,n){var s=t.current,i=Oe(),o=Wt(s);return r=Hh(r),t.context===null?t.context=r:t.pendingContext=r,t=xt(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ft(s,t,o),e!==null&&(at(e,s,o,i),Ks(e,s,o)),o}function Si(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Il(e,t){Xu(e,t),(e=e.alternate)&&Xu(e,t)}function tm(){return null}var Jh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ll(e){this._internalRoot=e}Bi.prototype.render=Ll.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(T(409));Mi(e,t,null,null)};Bi.prototype.unmount=Ll.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wr(function(){Mi(null,e,null,null)}),t[bt]=null}};function Bi(e){this._internalRoot=e}Bi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Pt.length&&t!==0&&t<Pt[r].priority;r++);Pt.splice(r,0,e),r===0&&jd(e)}};function Ul(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zu(){}function rm(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Si(o);i.call(u)}}var o=Gh(t,n,e,0,null,!1,!1,"",Zu);return e._reactRootContainer=o,e[bt]=o.current,Gn(e.nodeType===8?e.parentNode:e),wr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var u=Si(l);a.call(u)}}var l=$l(e,0,!1,null,null,!1,!1,"",Zu);return e._reactRootContainer=l,e[bt]=l.current,Gn(e.nodeType===8?e.parentNode:e),wr(function(){Mi(t,l,r,n)}),l}function Vi(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Si(o);a.call(l)}}Mi(t,o,e,s)}else o=rm(r,t,e,s,n);return Si(o)}Sd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=En(t.pendingLanes);r!==0&&(rl(t,r|1),Le(t,ie()),!(q&6)&&(ln=ie()+500,Qt()))}break;case 13:wr(function(){var n=St(e,1);if(n!==null){var s=Oe();at(n,e,1,s)}}),Il(e,1)}};nl=function(e){if(e.tag===13){var t=St(e,134217728);if(t!==null){var r=Oe();at(t,e,134217728,r)}Il(e,134217728)}};Ed=function(e){if(e.tag===13){var t=Wt(e),r=St(e,t);if(r!==null){var n=Oe();at(r,e,t,n)}Il(e,t)}};Cd=function(){return H};Td=function(e,t){var r=H;try{return H=e,t()}finally{H=r}};Qo=function(e,t,r){switch(t){case"input":if(Vo(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Ai(n);if(!s)throw Error(T(90));sd(n),Vo(n,s)}}}break;case"textarea":od(e,r);break;case"select":t=r.value,t!=null&&Hr(e,!!r.multiple,t,!1)}};fd=Nl;pd=wr;var nm={usingClientEntryPoint:!1,Events:[ps,zr,Ai,dd,hd,Nl]},xn={findFiberByHostInstance:lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sm={bundleType:xn.bundleType,version:xn.version,rendererPackageName:xn.rendererPackageName,rendererConfig:xn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ct.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yd(e),e===null?null:e.stateNode},findFiberByHostInstance:xn.findFiberByHostInstance||tm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Is=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Is.isDisabled&&Is.supportsFiber)try{Oi=Is.inject(sm),ft=Is}catch{}}We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nm;We.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ul(t))throw Error(T(200));return em(e,t,null,r)};We.createRoot=function(e,t){if(!Ul(e))throw Error(T(299));var r=!1,n="",s=Jh;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=$l(e,1,!1,null,null,r,!1,n,s),e[bt]=t.current,Gn(e.nodeType===8?e.parentNode:e),new Ll(t)};We.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(T(188)):(e=Object.keys(e).join(","),Error(T(268,e)));return e=yd(t),e=e===null?null:e.stateNode,e};We.flushSync=function(e){return wr(e)};We.hydrate=function(e,t,r){if(!Fi(t))throw Error(T(200));return Vi(null,e,t,!0,r)};We.hydrateRoot=function(e,t,r){if(!Ul(e))throw Error(T(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=Jh;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Gh(t,null,e,1,r??null,s,!1,i,o),e[bt]=t.current,Gn(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Bi(t)};We.render=function(e,t,r){if(!Fi(t))throw Error(T(200));return Vi(null,e,t,!1,r)};We.unmountComponentAtNode=function(e){if(!Fi(e))throw Error(T(40));return e._reactRootContainer?(wr(function(){Vi(null,null,e,!1,function(){e._reactRootContainer=null,e[bt]=null})}),!0):!1};We.unstable_batchedUpdates=Nl;We.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Fi(r))throw Error(T(200));if(e==null||e._reactInternals===void 0)throw Error(T(38));return Vi(e,t,r,!1,n)};We.version="18.3.1-next-f1338f8080-20240426";function Qh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qh)}catch(e){console.error(e)}}Qh(),Qc.exports=We;var im=Qc.exports,ec=im;Lo.createRoot=ec.createRoot,Lo.hydrateRoot=ec.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ns(){return ns=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ns.apply(this,arguments)}var Ut;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ut||(Ut={}));const tc="popstate";function om(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:a}=n.location;return Oa("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Yh(s)}return lm(t,r,null,e)}function le(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Dl(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function am(){return Math.random().toString(36).substr(2,8)}function rc(e,t){return{usr:e.state,key:e.key,idx:t}}function Oa(e,t,r,n){return r===void 0&&(r=null),ns({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?hn(t):t,{state:r,key:t&&t.key||n||am()})}function Yh(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function hn(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function lm(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a=Ut.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(ns({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=Ut.Pop;let k=c(),g=k==null?null:k-u;u=k,l&&l({action:a,location:w.location,delta:g})}function f(k,g){a=Ut.Push;let p=Oa(w.location,k,g);u=c()+1;let y=rc(p,u),_=w.createHref(p);try{o.pushState(y,"",_)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(_)}i&&l&&l({action:a,location:w.location,delta:1})}function m(k,g){a=Ut.Replace;let p=Oa(w.location,k,g);u=c();let y=rc(p,u),_=w.createHref(p);o.replaceState(y,"",_),i&&l&&l({action:a,location:w.location,delta:0})}function v(k){let g=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof k=="string"?k:Yh(k);return p=p.replace(/ $/,"%20"),le(g,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,g)}let w={get action(){return a},get location(){return e(s,o)},listen(k){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(tc,d),l=k,()=>{s.removeEventListener(tc,d),l=null}},createHref(k){return t(s,k)},createURL:v,encodeLocation(k){let g=v(k);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:m,go(k){return o.go(k)}};return w}var nc;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(nc||(nc={}));function um(e,t,r){return r===void 0&&(r="/"),cm(e,t,r)}function cm(e,t,r,n){let s=typeof t=="string"?hn(t):t,i=ef(s.pathname||"/",r);if(i==null)return null;let o=Xh(e);dm(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=bm(i);a=_m(o[l],u)}return a}function Xh(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(le(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=pr([n,l.relativePath]),c=r.concat(l);i.children&&i.children.length>0&&(le(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Xh(i.children,t,c,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:vm(u,i.index),routesMeta:c})};return e.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of Zh(i.path))s(i,o,l)}),t}function Zh(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=Zh(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function dm(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:wm(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const hm=/^:[\w-]+$/,fm=3,pm=2,gm=1,mm=10,ym=-2,sc=e=>e==="*";function vm(e,t){let r=e.split("/"),n=r.length;return r.some(sc)&&(n+=ym),t&&(n+=pm),r.filter(s=>!sc(s)).reduce((s,i)=>s+(hm.test(i)?fm:i===""?gm:mm),n)}function wm(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function _m(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,c=i==="/"?t:t.slice(i.length)||"/",d=xm({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:pr([i,d.pathname]),pathnameBase:jm(pr([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=pr([i,d.pathnameBase]))}return o}function xm(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=km(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((u,c,d)=>{let{paramName:f,isOptional:m}=c;if(f==="*"){let w=a[d]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const v=a[d];return m&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function km(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Dl(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function bm(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Dl(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ef(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const Sm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Em=e=>Sm.test(e);function Cm(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?hn(e):e,i;if(r)if(Em(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),Dl(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=ic(r.substring(1),"/"):i=ic(r,t)}else i=t;return{pathname:i,search:Om(n),hash:Nm(s)}}function ic(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function bo(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Tm(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function tf(e,t){let r=Tm(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function rf(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=hn(e):(s=ns({},e),le(!s.pathname||!s.pathname.includes("?"),bo("?","pathname","search",s)),le(!s.pathname||!s.pathname.includes("#"),bo("#","pathname","hash",s)),le(!s.search||!s.search.includes("#"),bo("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=r;else{let d=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?t[d]:"/"}let l=Cm(s,a),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const pr=e=>e.join("/").replace(/\/\/+/g,"/"),jm=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Om=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Nm=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Rm(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const nf=["post","put","patch","delete"];new Set(nf);const Pm=["get",...nf];new Set(Pm);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ss(){return ss=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ss.apply(this,arguments)}const zl=b.createContext(null),Am=b.createContext(null),ms=b.createContext(null),Wi=b.createContext(null),kr=b.createContext({outlet:null,matches:[],isDataRoute:!1}),sf=b.createContext(null);function ys(){return b.useContext(Wi)!=null}function Ml(){return ys()||le(!1),b.useContext(Wi).location}function of(e){b.useContext(ms).static||b.useLayoutEffect(e)}function qi(){let{isDataRoute:e}=b.useContext(kr);return e?Km():$m()}function $m(){ys()||le(!1);let e=b.useContext(zl),{basename:t,future:r,navigator:n}=b.useContext(ms),{matches:s}=b.useContext(kr),{pathname:i}=Ml(),o=JSON.stringify(tf(s,r.v7_relativeSplatPath)),a=b.useRef(!1);return of(()=>{a.current=!0}),b.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){n.go(u);return}let d=rf(u,JSON.parse(o),i,c.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:pr([t,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[t,n,o,i,e])}function Im(e,t){return Lm(e,t)}function Lm(e,t,r,n){ys()||le(!1);let{navigator:s}=b.useContext(ms),{matches:i}=b.useContext(kr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Ml(),c;if(t){var d;let k=typeof t=="string"?hn(t):t;l==="/"||(d=k.pathname)!=null&&d.startsWith(l)||le(!1),c=k}else c=u;let f=c.pathname||"/",m=f;if(l!=="/"){let k=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(k.length).join("/")}let v=um(e,{pathname:m}),w=Bm(v&&v.map(k=>Object.assign({},k,{params:Object.assign({},a,k.params),pathname:pr([l,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?l:pr([l,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,r,n);return t&&w?b.createElement(Wi.Provider,{value:{location:ss({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Ut.Pop}},w):w}function Um(){let e=qm(),t=Rm(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),r?b.createElement("pre",{style:s},r):null,null)}const Dm=b.createElement(Um,null);class zm extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?b.createElement(kr.Provider,{value:this.props.routeContext},b.createElement(sf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Mm(e){let{routeContext:t,match:r,children:n}=e,s=b.useContext(zl);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(kr.Provider,{value:t},n)}function Bm(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,a=(s=r)==null?void 0:s.errors;if(a!=null){let c=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);c>=0||le(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:m}=r,v=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||v){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,f)=>{let m,v=!1,w=null,k=null;r&&(m=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||Dm,l&&(u<0&&f===0?(Hm("route-fallback"),v=!0,k=null):u===f&&(v=!0,k=d.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,f+1)),p=()=>{let y;return m?y=w:v?y=k:d.route.Component?y=b.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=c,b.createElement(Mm,{match:d,routeContext:{outlet:c,matches:g,isDataRoute:r!=null},children:y})};return r&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?b.createElement(zm,{location:r.location,revalidation:r.revalidation,component:w,error:m,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()},null)}var af=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(af||{}),lf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(lf||{});function Fm(e){let t=b.useContext(zl);return t||le(!1),t}function Vm(e){let t=b.useContext(Am);return t||le(!1),t}function Wm(e){let t=b.useContext(kr);return t||le(!1),t}function uf(e){let t=Wm(),r=t.matches[t.matches.length-1];return r.route.id||le(!1),r.route.id}function qm(){var e;let t=b.useContext(sf),r=Vm(),n=uf();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Km(){let{router:e}=Fm(af.UseNavigateStable),t=uf(lf.UseNavigateStable),r=b.useRef(!1);return of(()=>{r.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ss({fromRouteId:t},i)))},[e,t])}const oc={};function Hm(e,t,r){oc[e]||(oc[e]=!0)}function Gm(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function So(e){let{to:t,replace:r,state:n,relative:s}=e;ys()||le(!1);let{future:i,static:o}=b.useContext(ms),{matches:a}=b.useContext(kr),{pathname:l}=Ml(),u=qi(),c=rf(t,tf(a,i.v7_relativeSplatPath),l,s==="path"),d=JSON.stringify(c);return b.useEffect(()=>u(JSON.parse(d),{replace:r,state:n,relative:s}),[u,d,s,r,n]),null}function Zs(e){le(!1)}function Jm(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Ut.Pop,navigator:i,static:o=!1,future:a}=e;ys()&&le(!1);let l=t.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:l,navigator:i,static:o,future:ss({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof n=="string"&&(n=hn(n));let{pathname:c="/",search:d="",hash:f="",state:m=null,key:v="default"}=n,w=b.useMemo(()=>{let k=ef(c,l);return k==null?null:{location:{pathname:k,search:d,hash:f,state:m,key:v},navigationType:s}},[l,c,d,f,m,v,s]);return w==null?null:b.createElement(ms.Provider,{value:u},b.createElement(Wi.Provider,{children:r,value:w}))}function Qm(e){let{children:t,location:r}=e;return Im(Na(t),r)}new Promise(()=>{});function Na(e,t){t===void 0&&(t=[]);let r=[];return b.Children.forEach(e,(n,s)=>{if(!b.isValidElement(n))return;let i=[...t,s];if(n.type===b.Fragment){r.push.apply(r,Na(n.props.children,i));return}n.type!==Zs&&le(!1),!n.props.index||!n.props.children||le(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Na(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Ym="6";try{window.__reactRouterVersion=Ym}catch{}const Xm="startTransition",ac=Gf[Xm];function Zm(e){let{basename:t,children:r,future:n,window:s}=e,i=b.useRef();i.current==null&&(i.current=om({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},c=b.useCallback(d=>{u&&ac?ac(()=>l(d)):l(d)},[l,u]);return b.useLayoutEffect(()=>o.listen(c),[o,c]),b.useEffect(()=>Gm(n),[n]),b.createElement(Jm,{basename:t,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}var lc;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(lc||(lc={}));var uc;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(uc||(uc={}));function Ki(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function ey(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((n=n.apply(e,t||[])).next())})}const ty=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Bl extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class ry extends Bl{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class cc extends Bl{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class dc extends Bl{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Ra;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Ra||(Ra={}));class ny{constructor(t,{headers:r={},customFetch:n,region:s=Ra.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=ty(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return ey(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:a,method:l,body:u,signal:c,timeout:d}=n;let f={},{region:m}=n;m||(m=this.region);const v=new URL(`${this.url}/${r}`);m&&m!=="any"&&(f["x-region"]=m,v.searchParams.set("forceFunctionRegion",m));let w;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",w=u):typeof u=="string"?(f["Content-Type"]="text/plain",w=u):typeof FormData<"u"&&u instanceof FormData?w=u:(f["Content-Type"]="application/json",w=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?w=JSON.stringify(u):w=u;let k=c;d&&(o=new AbortController,i=setTimeout(()=>o.abort(),d),c?(k=o.signal,c.addEventListener("abort",()=>o.abort())):k=o.signal);const g=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:w,signal:k}).catch(S=>{throw new ry(S)}),p=g.headers.get("x-relay-error");if(p&&p==="true")throw new cc(g);if(!g.ok)throw new dc(g);let y=((s=g.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return y==="application/json"?_=yield g.json():y==="application/octet-stream"||y==="application/pdf"?_=yield g.blob():y==="text/event-stream"?_=g:y==="multipart/form-data"?_=yield g.formData():_=yield g.text(),{data:_,error:null,response:g}}catch(a){return{data:null,error:a,response:a instanceof dc||a instanceof cc?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var sy=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},iy=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,u=i.status,c=i.statusText;if(i.ok){var d,f;if(r.method!=="HEAD"){var m;const g=await i.text();g===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((m=r.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?a=g:a=JSON.parse(g))}const w=(d=r.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),k=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");w&&k&&k.length>1&&(l=parseInt(k[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,u=406,c="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var v;const w=await i.text();try{o=JSON.parse(w),Array.isArray(o)&&i.status===404&&(a=[],o=null,u=200,c="OK")}catch{i.status===404&&w===""?(u=204,c="No Content"):o={message:w}}if(o&&r.isMaybeSingle&&(!(o==null||(v=o.details)===null||v===void 0)&&v.includes("0 rows"))&&(o=null,u=200,c="OK"),o&&r.shouldThrowOnError)throw new sy(o)}return{error:o,data:a,count:l,status:u,statusText:c}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let a="";const l=i==null?void 0:i.cause;if(l){var u,c,d,f;const v=(u=l==null?void 0:l.message)!==null&&u!==void 0?u:"",w=(c=l==null?void 0:l.code)!==null&&c!==void 0?c:"";a=`${(d=i==null?void 0:i.name)!==null&&d!==void 0?d:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"Error"}: ${v}`,w&&(a+=` (${w})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var m;a=(m=i==null?void 0:i.stack)!==null&&m!==void 0?m:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},oy=class extends iy{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const hc=new RegExp("[,()]");var Rr=class extends oy{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&hc.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&hc.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},ay=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:a,headers:l}=this.cloneRequestState();return a.searchParams.set("select",o),n&&l.append("Prefer",`count=${n}`),new Rr({method:s,url:a,headers:l,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);i.searchParams.set("columns",l.join(","))}}return new Rr({method:s,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST",{url:a,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&a.searchParams.set("on_conflict",t),n&&l.append("Prefer",`count=${n}`),s||l.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);a.searchParams.set("columns",c.join(","))}}return new Rr({method:o,url:a,headers:l,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Rr({method:n,url:s,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Rr({method:r,url:n,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},ly=class cf{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new ay(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new cf(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let u;const c=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(c)),d=n&&Object.values(r).some(c);d?(a="POST",u=r):n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([m,v])=>v!==void 0).map(([m,v])=>[m,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([m,v])=>{l.searchParams.append(m,v)})):(a="POST",u=r);const f=new Headers(this.headers);return d?f.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&f.set("Prefer",`count=${i}`),new Rr({method:a,url:l,headers:f,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class uy{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const cy="2.90.1",dy=`realtime-js/${cy}`,df="1.0.0",hy="2.0.0",fc=df,Pa=1e4,fy=1e3,py=100;var Rt;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Rt||(Rt={}));var ce;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ce||(ce={}));var st;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(st||(st={}));var Aa;(function(e){e.websocket="websocket"})(Aa||(Aa={}));var or;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(or||(or={}));class gy{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var s,i;const o=t.topic,a=(s=t.ref)!==null&&s!==void 0?s:"",l=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,c=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(c).length===0?"":JSON.stringify(c);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+u.length+d.length,m=new ArrayBuffer(this.HEADER_LENGTH+f);let v=new DataView(m),w=0;v.setUint8(w++,this.KINDS.userBroadcastPush),v.setUint8(w++,l.length),v.setUint8(w++,a.length),v.setUint8(w++,o.length),v.setUint8(w++,u.length),v.setUint8(w++,d.length),v.setUint8(w++,r),Array.from(l,g=>v.setUint8(w++,g.charCodeAt(0))),Array.from(a,g=>v.setUint8(w++,g.charCodeAt(0))),Array.from(o,g=>v.setUint8(w++,g.charCodeAt(0))),Array.from(u,g=>v.setUint8(w++,g.charCodeAt(0))),Array.from(d,g=>v.setUint8(w++,g.charCodeAt(0)));var k=new Uint8Array(m.byteLength+n.byteLength);return k.set(new Uint8Array(m),0),k.set(new Uint8Array(n),m.byteLength),k.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,o,a,l]=n;return r({join_ref:s,ref:i,topic:o,event:a,payload:l})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),a=r.getUint8(4);let l=this.HEADER_LENGTH+4;const u=n.decode(t.slice(l,l+s));l=l+s;const c=n.decode(t.slice(l,l+i));l=l+i;const d=n.decode(t.slice(l,l+o));l=l+o;const f=t.slice(l,t.byteLength),m=a===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,v={type:this.BROADCAST_EVENT,event:c,payload:m};return o>0&&(v.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class hf{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var G;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(G||(G={}));const pc=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=my(o,e,t,s),i),{}):{}},my=(e,t,r,n)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?ff(i,o):$a(o)},ff=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return _y(t,r)}switch(e){case G.bool:return yy(t);case G.float4:case G.float8:case G.int2:case G.int4:case G.int8:case G.numeric:case G.oid:return vy(t);case G.json:case G.jsonb:return wy(t);case G.timestamp:return xy(t);case G.abstime:case G.date:case G.daterange:case G.int4range:case G.int8range:case G.money:case G.reltime:case G.text:case G.time:case G.timestamptz:case G.timetz:case G.tsrange:case G.tstzrange:return $a(t);default:return $a(t)}},$a=e=>e,yy=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},vy=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},wy=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},_y=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>ff(t,a))}return e},xy=e=>typeof e=="string"?e.replace(" ","T"):e,pf=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Eo{constructor(t,r,n={},s=Pa){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var gc;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(gc||(gc={}));class Un{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Un.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Un.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Un.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const d=i[u];if(d){const f=c.map(k=>k.presence_ref),m=d.map(k=>k.presence_ref),v=c.filter(k=>m.indexOf(k.presence_ref)<0),w=d.filter(k=>f.indexOf(k.presence_ref)<0);v.length>0&&(a[u]=v),w.length>0&&(l[u]=w)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const d=t[a].map(m=>m.presence_ref),f=c.filter(m=>d.indexOf(m.presence_ref)<0);t[a].unshift(...f)}n(a,c,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),t[a]=u,s(a,u,l),u.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var mc;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(mc||(mc={}));var Dn;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Dn||(Dn={}));var yt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(yt||(yt={}));class Kr{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ce.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Eo(this,st.join,this.params,this.timeout),this.rejoinTimer=new hf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ce.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ce.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this._on(st.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Un(this),this.broadcastEndpointURL=pf(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ce.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[Dn.PRESENCE]&&this.bindings[Dn.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(yt.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(yt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){t==null||t(yt.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,k=(v=w==null?void 0:w.length)!==null&&v!==void 0?v:0,g=[];for(let p=0;p<k;p++){const y=w[p],{filter:{event:_,schema:S,table:x,filter:E}}=y,C=m&&m[p];if(C&&C.event===_&&Kr.isFilterValueEqual(C.schema,S)&&Kr.isFilterValueEqual(C.table,x)&&Kr.isFilterValueEqual(C.filter,E))g.push(Object.assign(Object.assign({},y),{id:C.id}));else{this.unsubscribe(),this.state=ce.errored,t==null||t(yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(yt.SUBSCRIBED);return}}).receive("error",m=>{this.state=ce.errored,t==null||t(yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===ce.joined&&t===Dn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ce.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(st.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Eo(this,st.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ce.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Eo(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>py){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=st;if(n&&[a,l,u,c].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var v,w,k;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((k=(w=m.filter)===null||w===void 0?void 0:w.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var v,w,k,g,p,y,_,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const x=m.id,E=(v=m.filter)===null||v===void 0?void 0:v.event;return x&&((w=r.ids)===null||w===void 0?void 0:w.includes(x))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))&&(!(!((g=m.filter)===null||g===void 0)&&g.table)||m.filter.table===((p=r.data)===null||p===void 0?void 0:p.table))}else{const x=(_=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return x==="*"||x===((S=r==null?void 0:r.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:w,table:k,commit_timestamp:g,type:p,errors:y}=v;f=Object.assign(Object.assign({},{schema:w,table:k,commit_timestamp:g,eventType:p,new:{},old:{},errors:y}),this._getPayloadRecords(v))}m.callback(f,n)})}_isClosed(){return this.state===ce.closed}_isJoined(){return this.state===ce.joined}_isJoining(){return this.state===ce.joining}_isLeaving(){return this.state===ce.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Kr.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(st.close,{},t)}_onError(t){this._on(st.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ce.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=pc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=pc(t.columns,t.old_record)),r}}const Co=()=>{},Ls={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ky=[1e3,2e3,5e3,1e4],by=1e4,Sy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ey{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Pa,this.transport=null,this.heartbeatIntervalMs=Ls.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Co,this.ref=0,this.reconnectTimer=null,this.vsn=fc,this.logger=Co,this.conn=null,this.sendBuffer=[],this.serializer=new gy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Aa.websocket}`,this.httpEndpoint=pf(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=uy.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Rt.connecting:return or.Connecting;case Rt.open:return or.Open;case Rt.closing:return or.Closing;default:return or.Closed}}isConnected(){return this.connectionState()===or.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Kr(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(fy,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ls.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(c){this.log("error","error in heartbeat callback",c)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Rt.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Rt.open||this.conn.readyState===Rt.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(st.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Sy],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:dy};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(st.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new hf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ls.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,a,l,u,c,d,f,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Pa,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Ls.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:Co,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:fc,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:v=>ky[v-1]||by,this.vsn){case df:this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(v,w)=>w(JSON.stringify(v)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:(v,w)=>w(JSON.parse(v));break;case hy:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var is=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Cy(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function Ty(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function jy(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const a=Cy(e.baseUrl,n,s),l=await Ty(e.auth),u=await t(a,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),c=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),f=d&&c?JSON.parse(c):c;if(!u.ok){const m=d?f:void 0,v=m==null?void 0:m.error;throw new is((v==null?void 0:v.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:m})}return{status:u.status,headers:u.headers,data:f}}}}function Us(e){return e.join("")}var Oy=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Us(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Us(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Us(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Us(e.namespace)}`}),!0}catch(t){if(t instanceof is&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof is&&r.status===409)return;throw r}}};function Er(e){return e.join("")}var Ny=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Er(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Er(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Er(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Er(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Er(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Er(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof is&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof is&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},Ry=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=jy({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new Oy(this.client,t),this.tableOps=new Ny(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Hi=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Z(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Py=class extends Hi{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Ia=class extends Hi{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Fl=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Ay=()=>Response,La=e=>{if(Array.isArray(e))return e.map(r=>La(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=La(n)}),t},$y=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Iy=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function os(e){"@babel/helpers - typeof";return os=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},os(e)}function Ly(e,t){if(os(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(os(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uy(e){var t=Ly(e,"string");return os(t)=="symbol"?t:t+""}function Dy(e,t,r){return(t=Uy(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yc(Object(r),!0).forEach(function(n){Dy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yc(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const To=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},zy=async(e,t,r)=>{e instanceof await Ay()&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{const s=e.status||500,i=(n==null?void 0:n.statusCode)||s+"";t(new Py(To(n),s,i))}).catch(n=>{t(new Ia(To(n),n))}):t(new Ia(To(e),e))},My=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:($y(n)?(s.headers=U({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),U(U({},s),r))};async function vs(e,t,r,n,s,i){return new Promise((o,a)=>{e(r,My(t,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>zy(l,a,n))})}async function as(e,t,r,n){return vs(e,"GET",t,r,n)}async function rt(e,t,r,n,s){return vs(e,"POST",t,n,s,r)}async function Ua(e,t,r,n,s){return vs(e,"PUT",t,n,s,r)}async function By(e,t,r,n){return vs(e,"HEAD",t,U(U({},r),{},{noResolveJson:!0}),n)}async function Vl(e,t,r,n,s){return vs(e,"DELETE",t,n,s,r)}var Fy=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Z(t))return{data:null,error:t};throw t}}};let gf;gf=Symbol.toStringTag;var Vy=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[gf]="BlobDownloadBuilder",this.promise=null}asStream(){return new Fy(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Z(t))return{data:null,error:t};throw t}}};const Wy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var qy=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Fl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var s=this;try{let i;const o=U(U({},vc),n);let a=U(U({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",s.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(a=U(U({},a),n.headers));const u=s._removeEmptyFolders(t),c=s._getFinalPath(u),d=await(e=="PUT"?Ua:rt)(s.fetch,`${s.url}/object/${c}`,i,U({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(Z(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),a=new URL(s.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=U({upsert:vc.upsert},n),c=U(U({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType),{data:{path:i,fullPath:(await Ua(s.fetch,a.toString(),l,{headers:c})).Key},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(Z(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const s=U({},r.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await rt(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+i.url),a=o.searchParams.get("token");if(!a)throw new Hi("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await rt(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Z(s))return{data:null,error:s};throw s}}async copy(e,t,r){var n=this;try{return{data:{path:(await rt(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Z(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,r){var n=this;try{let s=n._getFinalPath(e),i=await rt(n.fetch,`${n.url}/object/sign/${s}`,U({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Z(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,r){var n=this;try{const s=await rt(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>U(U({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Z(s))return{data:null,error:s};throw s}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>as(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new Vy(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:La(await as(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await By(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Z(n)&&n instanceof Ia){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let a=n.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${a}`)}}}async remove(e){var t=this;try{return{data:await Vl(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const s=U(U(U({},Wy),t),{},{prefix:e||""});return{data:await rt(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Z(s))return{data:null,error:s};throw s}}async listV2(e,t){var r=this;try{const n=U({},e);return{data:await rt(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const mf="2.90.1",yf={"X-Client-Info":`storage-js/${mf}`};var Ky=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const s=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=U(U({},yf),t),this.fetch=Fl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await as(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await as(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await rt(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await Ua(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await rt(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Vl(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Hy=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=U(U({},yf),t),this.fetch=Fl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await rt(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await as(t.fetch,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Vl(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!Iy(e))throw new Hi("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Ry({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(s,a),error:null}}catch(l){if(n)throw l;return{data:null,error:l}}}}})}};const Wl={"X-Client-Info":`storage-js/${mf}`,"Content-Type":"application/json"};var vf=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function ze(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var jo=class extends vf{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Gy=class extends vf{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const ql=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Jy=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},wc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Qy=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const n=e.status||500,s=e;if(typeof s.json=="function")s.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";t(new jo(wc(i),n,o))}).catch(()=>{const i=n+"";t(new jo(s.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";t(new jo(s.statusText||`HTTP ${n} error`,n,i))}}else t(new Gy(wc(e),e))},Yy=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(Jy(n)?(s.headers=U({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,U(U({},s),r)):s};async function Xy(e,t,r,n,s,i){return new Promise((o,a)=>{e(r,Yy(t,n,s,i)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>Qy(l,a,n))})}async function Me(e,t,r,n,s){return Xy(e,"POST",t,n,s,r)}var Zy=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=U(U({},Wl),t),this.fetch=ql(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await Me(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ze(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await Me(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ze(n))return{data:null,error:n};throw n}}},e0=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=U(U({},Wl),t),this.fetch=ql(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Me(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await Me(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Me(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}},t0=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=U(U({},Wl),t),this.fetch=ql(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await Me(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Me(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ze(r))return{data:null,error:r};throw r}}},r0=class extends t0{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new n0(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},n0=class extends Zy{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new s0(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},s0=class extends e0{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},i0=class extends Ky{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new qy(this.url,this.headers,e,this.fetch)}get vectors(){return new r0(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Hy(this.url+"/iceberg",this.headers,this.fetch)}};const wf="2.90.1",Pr=30*1e3,Da=3,Oo=Da*Pr,o0="http://localhost:9999",a0="supabase.auth.token",l0={"X-Client-Info":`gotrue-js/${wf}`},za="X-Supabase-Api-Version",_f={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},u0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,c0=10*60*1e3;class ls extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function A(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class d0 extends ls{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function h0(e){return A(e)&&e.name==="AuthApiError"}class ar extends ls{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Tt extends ls{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Ue extends Tt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function f0(e){return A(e)&&e.name==="AuthSessionMissingError"}class Cr extends Tt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ds extends Tt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class zs extends Tt{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function p0(e){return A(e)&&e.name==="AuthImplicitGrantRedirectError"}class _c extends Tt{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class g0 extends Tt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ma extends Tt{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function No(e){return A(e)&&e.name==="AuthRetryableFetchError"}class xc extends Tt{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Ba extends Tt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ei="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),kc=` 	
\r=`.split(""),m0=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<kc.length;t+=1)e[kc[t].charCodeAt(0)]=-2;for(let t=0;t<Ei.length;t+=1)e[Ei[t].charCodeAt(0)]=t;return e})();function bc(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ei[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ei[n]),t.queuedBits-=6}}function xf(e,t,r){const n=m0[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Sc(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{w0(o,n,r)};for(let o=0;o<e.length;o+=1)xf(e.charCodeAt(o),s,i);return t.join("")}function y0(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function v0(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}y0(n,t)}}function w0(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Zr(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)xf(e.charCodeAt(s),r,n);return new Uint8Array(t)}function _0(e){const t=[];return v0(e,r=>t.push(r)),new Uint8Array(t)}function dr(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>bc(s,r,n)),bc(null,r,n),t.join("")}function x0(e){return Math.round(Date.now()/1e3)+e}function k0(){return Symbol("auth-callback")}const we=()=>typeof window<"u"&&typeof document<"u",tr={tested:!1,writable:!1},kf=()=>{if(!we())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(tr.tested)return tr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),tr.tested=!0,tr.writable=!0}catch{tr.tested=!0,tr.writable=!1}return tr.writable};function b0(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const bf=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),S0=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ar=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},rr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ve=async(e,t)=>{await e.removeItem(t)};class Gi{constructor(){this.promise=new Gi.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Gi.promiseConstructor=Promise;function Ro(e){const t=e.split(".");if(t.length!==3)throw new Ba("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!u0.test(t[n]))throw new Ba("JWT not in base64url format");return{header:JSON.parse(Sc(t[0])),payload:JSON.parse(Sc(t[1])),signature:Zr(t[2]),raw:{header:t[0],payload:t[1]}}}async function E0(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function C0(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function T0(e){return("0"+e.toString(16)).substr(-2)}function j0(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,T0).join("")}async function O0(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function N0(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await O0(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Tr(e,t,r=!1){const n=j0();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Ar(e,`${t}-code-verifier`,s);const i=await N0(n);return[i,n===i?"plain":"s256"]}const R0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function P0(e){const t=e.headers.get(za);if(!t||!t.match(R0))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function A0(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function $0(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const I0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function jr(e){if(!I0.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Po(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function L0(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function Ec(e){return JSON.parse(JSON.stringify(e))}const ir=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),U0=[502,503,504];async function Cc(e){var t;if(!S0(e))throw new Ma(ir(e),0);if(U0.includes(e.status))throw new Ma(ir(e),e.status);let r;try{r=await e.json()}catch(i){throw new ar(ir(i),i)}let n;const s=P0(e);if(s&&s.getTime()>=_f["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new xc(ir(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ue}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new xc(ir(r),e.status,r.weak_password.reasons);throw new d0(ir(r),e.status||500,n)}const D0=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function L(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[za]||(i[za]=_f["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await z0(e,t,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function z0(e,t,r,n,s,i){const o=D0(t,n,s,i);let a;try{a=await e(r,Object.assign({},o))}catch(l){throw console.error(l),new Ma(ir(l),0)}if(a.ok||await Cc(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await Cc(l)}}function et(e){var t;let r=null;F0(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=x0(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Tc(e){const t=et(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function $t(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function M0(e){return{data:e,error:null}}function B0(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=Ki(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function jc(e){return e}function F0(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ao=["global","local","others"];class V0{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=bf(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Ao[0]){if(Ao.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ao.join(", ")}`);try{return await L(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(A(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await L(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:$t})}catch(n){if(A(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Ki(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await L(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:B0,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(A(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await L(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:$t})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await L(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:jc});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(v.split(";")[1].split("=")[1]);u[`${k}Page`]=w}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(A(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){jr(t);try{return await L(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:$t})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){jr(t);try{return await L(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:$t})}catch(n){if(A(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){jr(t);try{return await L(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:$t})}catch(n){if(A(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){jr(t.userId);try{const{data:r,error:n}=await L(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(A(r))return{data:null,error:r};throw r}}async _deleteFactor(t){jr(t.userId),jr(t.id);try{return{data:await L(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(A(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await L(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:jc});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(v.split(";")[1].split("=")[1]);u[`${k}Page`]=w}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(A(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await L(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(A(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await L(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(A(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await L(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(A(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await L(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(A(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await L(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(A(r))return{data:null,error:r};throw r}}}function Oc(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Or={debug:!!(globalThis&&kf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Sf extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class W0 extends Sf{}async function q0(e,t,r){Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Or.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new W0(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Or.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function K0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ef(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function H0(e){return parseInt(e,16)}function G0(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function J0(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:d,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=Ef(e.address),v=c?`${c}://${n}`:n,w=e.statement?`${e.statement}
`:"",k=`${v} wants you to sign in with your Ethereum account:
${m}

${w}`;let g=`URI: ${d}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(g+=`
Expiration Time: ${s.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),l&&(g+=`
Request ID: ${l}`),u){let p=`
Resources:`;for(const y of u){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);p+=`
- ${y}`}g+=p}return`${k}
${g}`}class oe extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Ci extends oe{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function Q0({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new oe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new oe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new oe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new oe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new oe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new oe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new oe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new oe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(Cf(o)){if(i.rp.id!==o)return new oe({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new oe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new oe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new oe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new oe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Y0({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new oe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new oe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(Cf(n)){if(r.rpId!==n)return new oe({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new oe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new oe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new oe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class X0{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Z0=new X0;function ev(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=Ki(e,["challenge","user","excludeCredentials"]),i=Zr(t).buffer,o=Object.assign(Object.assign({},r),{id:Zr(r.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:Zr(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function tv(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Ki(e,["challenge","allowCredentials"]),s=Zr(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const a=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Zr(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function rv(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:dr(new Uint8Array(e.response.attestationObject)),clientDataJSON:dr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function nv(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:dr(new Uint8Array(s.authenticatorData)),clientDataJSON:dr(new Uint8Array(s.clientDataJSON)),signature:dr(new Uint8Array(s.signature)),userHandle:s.userHandle?dr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Cf(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Nc(){var e,t;return!!(we()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function sv(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ci("Browser returned unexpected credential type",t)}:{data:null,error:new Ci("Empty credential response",t)}}catch(t){return{data:null,error:Q0({error:t,options:e})}}}async function iv(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ci("Browser returned unexpected credential type",t)}:{data:null,error:new Ci("Empty credential response",t)}}catch(t){return{data:null,error:Y0({error:t,options:e})}}}const ov={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},av={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ti(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const a=n[i];t(a)?n[i]=Ti(a,o):n[i]=Ti(o)}else n[i]=o}return n}function lv(e,t){return Ti(ov,e,t||{})}function uv(e,t){return Ti(av,e,t||{})}class cv{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:a};const l=s??Z0.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=lv(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:c,error:d}=await sv({publicKey:u,signal:l});return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}case"request":{const u=uv(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:c,error:d}=await iv(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}}}catch(o){return A(o)?{data:null,error:o}:{data:null,error:new ar("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new ls("rpId is required for WebAuthn authentication")};try{if(!Nc())return{data:null,error:new ar("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return A(o)?{data:null,error:o}:{data:null,error:new ar("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new ls("rpId is required for WebAuthn registration")};try{if(!Nc())return{data:null,error:new ar("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(c=>{var d;return(d=c.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return A(o)?{data:null,error:o}:{data:null,error:new ar("Unexpected error in register",o)}}}}K0();const dv={url:o0,storageKey:a0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:l0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Rc(e,t,r){return await r()}const Nr={};class us{get jwks(){var t,r;return(r=(t=Nr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Nr[this.storageKey]=Object.assign(Object.assign({},Nr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Nr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Nr[this.storageKey]=Object.assign(Object.assign({},Nr[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},dv),t);if(this.storageKey=i.storageKey,this.instanceID=(r=us.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,us.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&we()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new V0({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=bf(i.fetch),this.lock=i.lock||Rc,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&we()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=q0:this.lock=Rc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new cv(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:kf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Oc(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Oc(this.memoryStorage)),we()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${wf}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(we()&&(r=b0(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),we()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),p0(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return A(r)?this._returnResult({error:r}):this._returnResult({error:new ar("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:et}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(A(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:c,password:d,options:f}=t;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await Tr(this.storage,this.storageKey)),i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:v},xform:et})}else if("phone"in t){const{phone:c,password:d,options:f}=t;i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:et})}else throw new Ds("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await ve(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(await ve(this.storage,`${this.storageKey}-code-verifier`),A(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:a}=t;r=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Tc})}else if("phone"in t){const{phone:i,password:o,options:a}=t;r=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Tc})}else throw new Ds("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new Cr;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,a,l,u,c,d,f;let m,v;if("message"in t)m=t.message,v=t.signature;else{const{chain:w,wallet:k,statement:g,options:p}=t;let y;if(we())if(typeof k=="object")y=k;else{const M=window;if("ethereum"in M&&typeof M.ethereum=="object"&&"request"in M.ethereum&&typeof M.ethereum.request=="function")y=M.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=k}const _=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href),S=await y.request({method:"eth_requestAccounts"}).then(M=>M).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const x=Ef(S[0]);let E=(n=p==null?void 0:p.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!E){const M=await y.request({method:"eth_chainId"});E=H0(M)}const C={domain:_.host,address:x,statement:g,uri:_.href,version:"1",chainId:E,nonce:(s=p==null?void 0:p.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=p==null?void 0:p.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=p==null?void 0:p.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=p==null?void 0:p.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=p==null?void 0:p.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=p==null?void 0:p.signInWithEthereum)===null||c===void 0?void 0:c.resources};m=J0(C),v=await y.request({method:"personal_sign",params:[G0(m),x]})}try{const{data:w,error:k}=await L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:v},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:et});if(k)throw k;if(!w||!w.session||!w.user){const g=new Cr;return this._returnResult({data:{user:null,session:null},error:g})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:k})}catch(w){if(A(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var r,n,s,i,o,a,l,u,c,d,f,m;let v,w;if("message"in t)v=t.message,w=t.signature;else{const{chain:k,wallet:g,statement:p,options:y}=t;let _;if(we())if(typeof g=="object")_=g;else{const x=window;if("solana"in x&&typeof x.solana=="object"&&("signIn"in x.solana&&typeof x.solana.signIn=="function"||"signMessage"in x.solana&&typeof x.solana.signMessage=="function"))_=x.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=g}const S=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const x=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),p?{statement:p}:null));let E;if(Array.isArray(x)&&x[0]&&typeof x[0]=="object")E=x[0];else if(x&&typeof x=="object"&&"signedMessage"in x&&"signature"in x)E=x;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)v=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),w=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${S.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=y==null?void 0:y.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((d=(c=y==null?void 0:y.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",...y.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const x=await _.signMessage(new TextEncoder().encode(v),"utf8");if(!x||!(x instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=x}}try{const{data:k,error:g}=await L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:dr(w)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:et});if(g)throw g;if(!k||!k.session||!k.user){const p=new Cr;return this._returnResult({data:{user:null,session:null},error:p})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:g})}catch(k){if(A(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(t){const r=await rr(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new g0;const{data:i,error:o}=await L(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:et});if(await ve(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new Cr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await ve(this.storage,`${this.storageKey}-code-verifier`),A(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,a=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:et}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new Cr;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Tr(this.storage,this.storageKey));const{error:d}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:c}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new Ds("You must provide either an email or phone number.")}catch(a){if(await ve(this.storage,`${this.storageKey}-code-verifier`),A(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await L(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:et});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(A(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Tr(this.storage,this.storageKey));const u=await L(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:M0});return!((i=u.data)===null||i===void 0)&&i.url&&we()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await ve(this.storage,`${this.storageKey}-code-verifier`),A(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ue;const{error:s}=await L(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(A(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await L(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:a}=await L(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new Ds("You must provide either an email or phone number and a type")}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await rr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Oo:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await rr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Po()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=L0(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:$t}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ue}:await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:$t})})}catch(r){if(A(r))return f0(r)&&(await this._removeSession(),await ve(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ue;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Tr(this.storage,this.storageKey));const{data:u,error:c}=await L(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:$t});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await ve(this.storage,`${this.storageKey}-code-verifier`),A(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ue;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Ro(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(A(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:a}=r;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ue;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!we())throw new zs("No browser detected.");if(t.error||t.error_description||t.error_code)throw new zs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new _c("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new zs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new _c("No code detected.");const{data:p,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!i||!a||!o||!u)throw new zs("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let f=c+d;l&&(f=parseInt(l));const m=f-c;m*1e3<=Pr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const v=f-d;c-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,c):c-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,c);const{data:w,error:k}=await this._getUser(i);if(k)throw k;const g={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:t.type},error:null})}catch(n){if(A(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await rr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(h0(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return t!=="others"&&(await this._removeSession(),await ve(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=k0(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Tr(this.storage,this.storageKey,!0));try{return await L(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await ve(this.storage,`${this.storageKey}-code-verifier`),A(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,u,c;const{data:d,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await L(this.fetch,"GET",m,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return we()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(A(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:a,token:l,access_token:u,nonce:c}=t,d=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:et}),{data:f,error:m}=d;return m?this._returnResult({data:{user:null,session:null},error:m}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Cr}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:m}))}catch(s){if(await ve(this.storage,`${this.storageKey}-code-verifier`),A(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await L(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await C0(async s=>(s>0&&await E0(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await L(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:et})),(s,i)=>{const o=200*Math.pow(2,s);return i&&No(i)&&Date.now()+o-n<Pr})}catch(n){if(this._debug(r,"error",n),A(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),we()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await rr(this.storage,this.storageKey);if(s&&this.userStorage){let o=await rr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Ar(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Po()}else if(s&&!s.user&&!s.user){const o=await rr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await ve(this.storage,this.storageKey+"-user"),await Ar(this.storage,this.storageKey,s)):s.user=Po()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Oo;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Oo}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),No(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ue;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Gi;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ue;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),A(i)){const o={data:null,error:i};return No(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await ve(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Ar(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Ec(s);await Ar(this.storage,this.storageKey,i)}else{const s=Ec(r);await Ar(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ve(this.storage,this.storageKey),await ve(this.storage,this.storageKey+"-code-verifier"),await ve(this.storage,this.storageKey+"-user"),this.userStorage&&await ve(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&we()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Pr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Pr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Pr}ms, refresh threshold is ${Da} ticks`),s<=Da&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Sf)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!we()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Tr(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await L(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await L(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?rv(t.webauthn.credential_response):nv(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await L(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await L(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:ev(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:tv(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Ro(n.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(c=>c.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await L(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ue})})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ue});const o=await L(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&we()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(A(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ue});const o=await L(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&we()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(A(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await L(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ue})})}catch(t){if(A(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await L(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ue})})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+c0>s)return n;const{data:i,error:o}=await L(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:v}=await this.getSession();if(v||!m.session)return this._returnResult({data:null,error:v});n=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Ro(n);r!=null&&r.allowExpired||A0(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const c=$0(s.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,_0(`${a}.${l}`)))throw new Ba("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(A(n))return this._returnResult({data:null,error:n});throw n}}}us.nextInstanceID={};const hv=us,fv="2.90.1";let Tn="";typeof Deno<"u"?Tn="deno":typeof document<"u"?Tn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Tn="react-native":Tn="node";const pv={"X-Client-Info":`supabase-js-${Tn}/${fv}`},gv={headers:pv},mv={schema:"public"},yv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vv={};function cs(e){"@babel/helpers - typeof";return cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cs(e)}function wv(e,t){if(cs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _v(e){var t=wv(e,"string");return cs(t)=="symbol"?t:t+""}function xv(e,t,r){return(t=_v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pc(Object(r),!0).forEach(function(n){xv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pc(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const kv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),bv=()=>Headers,Sv=(e,t,r)=>{const n=kv(r),s=bv();return async(i,o)=>{var a;const l=(a=await t())!==null&&a!==void 0?a:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(i,ne(ne({},o),{},{headers:u}))}};function Ev(e){return e.endsWith("/")?e:e+"/"}function Cv(e,t){var r,n;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:u,realtime:c,global:d}=t,f={db:ne(ne({},l),s),auth:ne(ne({},u),i),realtime:ne(ne({},c),o),storage:{},global:ne(ne(ne({},d),a),{},{headers:ne(ne({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function Tv(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ev(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var jv=class extends hv{constructor(e){super(e)}},Ov=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=Tv(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:mv,realtime:vv,auth:ne(ne({},yv),{},{storageKey:o}),global:gv},l=Cv(r??{},a);if(this.storageKey=(n=l.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(c,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=Sv(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(ne({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(c=>this.realtime.setAuth(c)).catch(c=>console.warn("Failed to set initial Realtime auth token:",c)),this.rest=new ly(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new i0(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new ny(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:u},c,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new jv({url:this.authUrl.href,headers:ne(ne({},f),c),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:a,debug:l,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Ey(this.realtimeUrl.href,ne(ne({},e),{},{params:ne(ne({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Nv=(e,t,r)=>new Ov(e,t,r);function Rv(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Rv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Pv=1e3,kn=3,Ac=1e3,$c=2,Fa=e=>new Promise(t=>setTimeout(t,e));function en(e){var n;if(!e)return!1;const t=e.toString().toLowerCase(),r=((n=e.message)==null?void 0:n.toLowerCase())||"";return t.includes("cors")||t.includes("network")||t.includes("failed to fetch")||r.includes("cors")||r.includes("network")||r.includes("failed to fetch")||e.name==="TypeError"&&r.includes("fetch")}function Ic(e){var r;if(!e)return!1;if(en(e))return!0;const t=((r=e.message)==null?void 0:r.toLowerCase())||"";return!!(t.includes("timeout")||t.includes("429")||t.includes("503")||t.includes("504"))}function Lc(e){var r;if(!e)return" ";if(en(e))return"    .  -   .";const t=((r=e.message)==null?void 0:r.toLowerCase())||"";return t.includes("timeout")?"     .  .":t.includes("429")?"  .     .":t.includes("503")||t.includes("504")?"  .   .":t.includes("not found")?"      .":` : ${e.message||" "}`}function Av(e){return e.id?e.bar1!==void 0&&typeof e.bar1!="number"?(console.error(" bar1     ",e.id),!1):e.bar2!==void 0&&typeof e.bar2!="number"?(console.error(" bar2     ",e.id),!1):e.cold_room!==void 0&&typeof e.cold_room!="number"?(console.error(" cold_room     ",e.id),!1):!0:(console.error("   ID:",e),!1)}function $v(e){return e.filter(Av).map(t=>({id:t.id,bar1:t.bar1??0,bar2:t.bar2??0,cold_room:t.cold_room??0}))}function Iv(e,t){const r=[];for(let n=0;n<e.length;n+=t)r.push(e.slice(n,n+t));return r}async function Va(e,t,r,n=1){try{console.log(`  ${t+1}/${r}:  ${n}/${kn}`);const{data:s,error:i}=await fe.rpc("bulk_update_products",{product_updates:e}).single();if(i){if(console.error(`  RPC   ${t+1}:`,i),Ic(i)&&n<kn){const o=Ac*Math.pow($c,n-1);return console.warn(`   ${o}...`),await Fa(o),Va(e,t,r,n+1)}throw i}if(!s)throw new Error("   ");if(typeof s.updated_count!="number"||typeof s.failed_count!="number")throw console.error("   :",s),new Error("   ");return console.log(`  ${t+1}/${r} :`,{updated:s.updated_count,failed:s.failed_count}),s}catch(s){if(console.error(`     ${t+1}:`,s),Ic(s)&&n<kn){const i=Ac*Math.pow($c,n-1);return console.warn(`  ${en(s)?"CORS":""} `),console.warn(`   ${i}... ( ${n+1}/${kn})`),await Fa(i),Va(e,t,r,n+1)}throw console.error(`  ${kn}     ${t+1}`),s}}async function Lv(e){if(!e||!Array.isArray(e)){const u=new Error(" :   ");throw console.error("",u.message),u}if(e.length===0)return console.log("   "),{success:!0,total:0,updated:0,failed:0,errors:[],duration:0,userMessage:"   "};const t=performance.now();console.log(""),console.log(`    ${e.length} ...`);const r=$v(e);if(r.length===0){const u=new Error("    ");throw console.error("",u.message),u}r.length<e.length&&console.warn(`  ${e.length-r.length}  `);const n=Iv(r,Pv);console.log(`  ${n.length} ()  `);const s={total:r.length,updated:0,failed:0,errors:[],hadRetries:!1};let i=null;for(let u=0;u<n.length;u++)try{const c=await Va(n[u],u,n.length);s.updated+=c.updated_count,s.failed+=c.failed_count,c.errors&&Array.isArray(c.errors)&&s.errors.push(...c.errors),u<n.length-1&&await Fa(100)}catch(c){console.error(`     ${u+1}:`,c),i=c;const d=n[u].length;if(s.failed+=d,s.errors.push({batch_index:u+1,products_count:d,error:c.message||"Unknown error",is_cors_error:en(c),user_message:Lc(c)}),!en(c))break}const o=performance.now()-t,a=s.failed===0&&!i;console.log(""),console.log(`${a?"":""}   `),console.log(" :"),console.log(`    : ${s.total}`),console.log(`    : ${s.updated}`),console.log(`    : ${s.failed}`),console.log(`    : ${Math.round(o)}`),s.updated>0&&console.log(`    : ${Math.round(s.updated/(o/1e3))} /`),console.log(""),s.errors.length>0&&console.error("  :",s.errors);let l="";if(a)l=`  !  ${s.updated} `;else if(s.updated>0){l=`  : ${s.updated}  ${s.total} . `;const u=s.errors[0];u!=null&&u.is_cors_error?l+="  .     .":u!=null&&u.user_message?l+=u.user_message:l+="   ."}else i&&en(i)?l="    .     .  -   .":i?l=`    . ${Lc(i)}`:l="    .  .";return{success:a,total:s.total,updated:s.updated,failed:s.failed,errors:s.errors,duration:Math.round(o),userMessage:l,hasCORSErrors:s.errors.some(u=>u.is_cors_error)}}const Uv="https://lmysveosqckpbyuldiym.supabase.co",Dv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxteXN2ZW9zcWNrcGJ5dWxkaXltIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ4MTMxNTksImV4cCI6MjA4MDM4OTE1OX0.z1i_Fi7uCXnX3cml7RbTHR6RxIrxVY947iOCTi80fQY",fe=Nv(Uv,Dv,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),zv=e=>new Promise(t=>setTimeout(t,e));class Mv{constructor(){this.client=fe}async fetchCategories(){if(!this.client)throw new Error("Supabase   ");console.log("  ...");const{data:t,error:r}=await this.client.from("categories").select("*").order("order_index");if(r)throw console.error("   :",r),r;return console.log(`  ${t.length} `),t}async fetchProducts(){if(!this.client)throw new Error("Supabase   ");console.log("  ...");const{data:t,error:r}=await this.client.from("products").select("*").order("order_index",{nullsLast:!0});if(r)throw console.error("   :",r),r;return console.log(`  ${t.length} `),t}async insertProduct(t){if(!this.client)throw new Error("Supabase   ");console.log("   :",t.name);try{const{data:r,error:n}=await this.client.from("products").insert([{category_id:t.category_id,name:t.name,volume:t.volume,bar1:t.bar1||0,bar2:t.bar2||0,cold_room:t.cold_room||0,order_index:t.order_index||null,is_frozen:!1,visible_to_bar1:!0,visible_to_bar2:!0}]).select().single();if(n)throw console.error("   :",n),n;return console.log("    ID:",r.id),r}catch(r){throw console.error("    :",r),r}}async insertCategory(t){if(!this.client)throw new Error("Supabase   ");console.log("   :",t.name);try{const{data:r,error:n}=await this.client.from("categories").insert([{name:t.name,order_index:t.order_index}]).select().single();if(n)throw console.error("   :",n),n;return console.log("    ID:",r.id),r}catch(r){throw console.error("    :",r),r}}async updateProductStock(t,r,n=0){if(!this.client)throw new Error("Supabase   ");try{const{error:s}=await this.client.from("products").update(r).eq("id",t);if(s)throw s;return{success:!0,productId:t}}catch(s){return n<2&&(s.message.includes("fetch")||s.message.includes("network"))?(console.warn(`    ${t},  ${n+1}`),await zv(1e3*(n+1)),this.updateProductStock(t,r,n+1)):(console.error(`    ${t}:`,s),{success:!1,productId:t,error:s.message})}}async syncAll(t){var r,n;if(!this.client)throw new Error("Supabase   ");if(!t||t.length===0)return console.log(" syncAll:    "),{success:!0,total:0,updated:0,failed:0,errors:[],duration:0,userMessage:"   ",hasCORSErrors:!1};console.log(`   ${t.length}   Bulk RPC...`);try{const s=await Lv(t);return console.log("  :",{success:s.success,updated:s.updated,failed:s.failed,total:s.total,duration:s.duration}),s.success?console.log("   "):s.updated>0?(console.warn(`  : ${s.updated}/${s.total}`),s.hasCORSErrors&&console.warn("  CORS  -    ")):(console.error("   "),s.hasCORSErrors&&console.error(" : CORS/ ")),s.errors.length>0&&(console.group("  :"),s.errors.forEach((i,o)=>{console.error(`${o+1}.`,i)}),console.groupEnd()),s}catch(s){return console.error("   :",s),{success:!1,total:t.length,updated:0,failed:t.length,errors:[{error:s.message||"Unknown error",type:"critical"}],duration:0,userMessage:`  : ${s.message||"    "}`,hasCORSErrors:((r=s.message)==null?void 0:r.toLowerCase().includes("cors"))||((n=s.message)==null?void 0:n.toLowerCase().includes("network"))}}}async fetchUserProfile(t){return console.warn(" fetchUserProfile .    email  AuthContext"),{id:t,role:"bar1",email:"unknown@local"}}}const dt=new Mv,Tf=b.createContext(null),Ji=()=>{const e=b.useContext(Tf);if(!e)throw new Error("useAuth    AuthProvider");return e},Bv=e=>{if(!e)return console.warn(" getRoleFromEmail: email is null"),"bar1";const t=e.toLowerCase();return console.log("    email:",t),t==="manager@fullerspub.local"?(console.log(" : manager"),"manager"):t==="bar1@fullerspub.local"?(console.log(" : bar1"),"bar1"):t==="bar2@fullerspub.local"?(console.log(" : bar2"),"bar2"):(console.warn("  email,   bar1  "),"bar1")},$o=e=>{if(!e)return console.warn(" createUserProfile: user is null"),null;console.log("   :",e.email);const t=Bv(e.email),r={id:e.id,email:e.email,role:t,created_at:e.created_at,updated_at:e.updated_at};return console.log("  :",r),r},Fv=({children:e})=>{const[t,r]=b.useState(null),[n,s]=b.useState(null),[i,o]=b.useState(!0);b.useEffect(()=>{(async()=>{try{console.log("  ...");const{data:{session:m},error:v}=await fe.auth.getSession();if(v)throw console.error("   :",v),v;if(m!=null&&m.user){console.log("  :",m.user.email),r(m.user);const w=$o(m.user);s(w)}else console.log("   ")}catch(m){console.error("   auth:",m),r(null),s(null)}finally{o(!1)}})();const{data:{subscription:f}}=fe.auth.onAuthStateChange(async(m,v)=>{if(console.log(" Auth state change:",m),m==="SIGNED_IN"&&(v!=null&&v.user)){console.log("  :",v.user.email),r(v.user);const w=$o(v.user);s(w)}else m==="SIGNED_OUT"&&(console.log("  "),r(null),s(null))});return()=>{f==null||f.unsubscribe()}},[]);const c={user:t,userProfile:n,loading:i,signIn:async(d,f)=>{try{o(!0),console.log("  :",d);const{data:m,error:v}=await fe.auth.signInWithPassword({email:d,password:f});if(v)throw console.error("  :",v),v;if(m.user){console.log("  :",m.user.email),r(m.user);const w=$o(m.user);return s(w),{success:!0,user:m.user,profile:w}}return{success:!1,error:" "}}catch(m){return console.error("  :",m),{success:!1,error:m.message}}finally{o(!1)}},signOut:async()=>{try{o(!0),console.log("  ...");const{error:d}=await fe.auth.signOut();if(d)throw console.error("  :",d),d;r(null),s(null),localStorage.removeItem("barStockData"),console.log("  , localStorage ")}catch(d){console.error("  :",d),r(null),s(null),localStorage.removeItem("barStockData")}finally{o(!1)}},getAvailableColumns:()=>{if(console.log(" getAvailableColumns "),console.log(" User email:",t==null?void 0:t.email),console.log(" User role:",n==null?void 0:n.role),!(n!=null&&n.role))return console.warn("   ,   "),[];let d=[];switch(n.role){case"manager":d=["bar1","bar2","cold_room"],console.log(" Manager role:  ",d);break;case"bar1":d=["bar1","cold_room"],console.log(" Bar1 role: bar1  cold_room",d);break;case"bar2":d=["bar2"],console.log(" Bar2 role:  bar2",d);break;default:console.warn("  :",n.role),d=[]}return d}};return h.jsx(Tf.Provider,{value:c,children:e})},gt=({children:e,variant:t="primary",size:r="md",loading:n=!1,disabled:s=!1,icon:i,className:o="",...a})=>{const l={primary:"bg-primary hover:bg-primary-hover text-white shadow-md",secondary:"bg-secondary hover:bg-secondary-hover text-white shadow-sm",success:"bg-success hover:bg-success-hover text-white shadow-md",error:"bg-error hover:bg-error-hover text-white shadow-md",warning:"bg-warning hover:bg-warning-hover text-white shadow-md",info:"bg-cyan-600 hover:bg-cyan-700 text-white shadow-md",outline:"bg-transparent border-2 border-primary text-primary hover:bg-primary/10",danger:"bg-error/20 hover:bg-error/30 border border-error/30 text-error-hover",ghost:"bg-transparent hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300"},u={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return h.jsxs("button",{disabled:s||n,className:`
        inline-flex items-center justify-center gap-2
        rounded-xl font-bold transition-all
        active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed
        ${l[t]||l.primary}
        ${u[r]||u.md}
        ${o}
      `,...a,children:[n&&h.jsx("span",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),!n&&i&&h.jsx(i,{size:r==="sm"?14:r==="lg"?20:16}),e]})},Uc=({label:e,error:t,className:r="",...n})=>h.jsxs("div",{className:`flex flex-col gap-1.5 ${r}`,children:[e&&h.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:e}),h.jsx("input",{className:`
          w-full px-4 py-3 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700
          rounded-xl text-sm text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400
          focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20
          transition-all disabled:opacity-50 disabled:cursor-not-allowed
          ${t?"border-error focus:border-error focus:ring-error/20":""}
        `,...n}),t&&h.jsx("span",{className:"text-xs text-error ml-1 animate-shake",children:t})]});function Vv(){const[e,t]=b.useState(""),[r,n]=b.useState(""),[s,i]=b.useState(""),[o,a]=b.useState(!1),{signIn:l}=Ji(),u=qi(),c=async d=>{if(d.preventDefault(),i(""),a(!0),!e||!r){i(" email  "),a(!1);return}const f=await l(e,r);if(f.success)u("/",{replace:!0});else{let m=" ";f.error.includes("Invalid login credentials")?m=" email  ":f.error.includes("Email not confirmed")?m="Email  ":m=f.error,i(m)}a(!1)};return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#1a1a2e] via-[#16213e] to-[#0f3460] p-4",children:h.jsx("div",{className:"w-full max-w-[400px]",children:h.jsxs("div",{className:"bg-white/95 dark:bg-gray-800/95 rounded-2xl p-8 shadow-heavy animate-slide-up-slow",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"w-[60px] h-[60px] mx-auto mb-4 bg-gradient-to-br from-primary to-primary-hover rounded-xl flex items-center justify-center text-white",children:h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-8 h-8",children:[h.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),h.jsx("path",{d:"M2 17l10 5 10-5"}),h.jsx("path",{d:"M2 12l10 5 10-5"})]})}),h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-50 mb-2",children:"  "}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"  "})]}),h.jsxs("form",{onSubmit:c,className:"flex flex-col gap-5",children:[h.jsx(Uc,{label:"Email",id:"email",type:"email",value:e,onChange:d=>t(d.target.value),placeholder:"example@email.com",autoComplete:"email",disabled:o}),h.jsx(Uc,{label:"",id:"password",type:"password",value:r,onChange:d=>n(d.target.value),placeholder:" ",autoComplete:"current-password",disabled:o,error:s}),h.jsx(gt,{type:"submit",size:"lg",className:"w-full mt-2",loading:o,children:""})]})]})})})}var Wv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const qv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Kv=(e,t)=>{const r=b.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:a,...l},u)=>b.createElement("svg",{ref:u,...Wv,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${qv(e)}`,...l},[...t.map(([c,d])=>b.createElement(c,d)),...(Array.isArray(a)?a:[a])||[]]));return r.displayName=`${e}`,r};var Yt=Kv;const Hv=Yt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Gv=Yt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Jv=Yt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Qv=Yt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Yv=Yt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Xv=Yt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Zv=Yt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ew=Yt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),jf=({message:e,type:t,onClose:r})=>{const[n,s]=b.useState(!1);b.useEffect(()=>{if(e){setTimeout(()=>s(!0),10);const l=setTimeout(()=>{i()},5e3);return()=>clearTimeout(l)}},[e]);const i=()=>{s(!1),setTimeout(()=>{r()},300)};if(!e)return null;const o={success:{icon:"",bgColor:"bg-green-500",borderColor:"border-green-600",textColor:"text-white",title:""},error:{icon:"",bgColor:"bg-red-500",borderColor:"border-red-600",textColor:"text-white",title:""},warning:{icon:"",bgColor:"bg-orange-500",borderColor:"border-orange-600",textColor:"text-white",title:""},info:{icon:"",bgColor:"bg-blue-500",borderColor:"border-blue-600",textColor:"text-white",title:""}},a=o[t]||o.info;return h.jsxs("div",{className:`
        fixed top-6 right-6 z-[9999]
        ${a.bgColor} ${a.textColor}
        min-w-[320px] max-w-[500px]
        px-6 py-4
        rounded-xl
        border-2 ${a.borderColor}
        shadow-heavy backdrop-blur-md
        transition-all duration-300 ease-out
        ${n?"opacity-100 translate-y-0":"opacity-0 -translate-y-4"}
      `,children:[h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"text-3xl flex-shrink-0 leading-none mt-0.5",children:a.icon}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:"font-bold text-base mb-1",children:a.title}),h.jsx("div",{className:"text-sm opacity-95 leading-relaxed",children:e})]}),h.jsx("button",{onClick:i,className:`
            flex-shrink-0
            text-white opacity-70 hover:opacity-100
            transition-opacity duration-200
            text-xl leading-none
            w-6 h-6
            flex items-center justify-center
            rounded-full
            hover:bg-white/20
          `,"aria-label":" ",children:""})]}),h.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white/20 rounded-b-xl overflow-hidden",children:h.jsx("div",{className:"h-full bg-white/40 animate-progress"})})]})},tw=({value:e,onChange:t})=>h.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-gray-800 pb-4 transition-colors",children:h.jsxs("div",{className:"relative group",children:[h.jsx(Yv,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-primary transition-colors"}),h.jsx("input",{type:"text",value:e,onChange:r=>t(r.target.value),placeholder:"    ...",className:"w-full pl-12 pr-4 py-3 bg-gray-50 dark:bg-gray-900/50 border border-gray-100 dark:border-gray-700 rounded-2xl text-sm text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all shadow-sm"})]})}),rw=({isOpen:e,title:t,value:r,onClose:n,onConfirm:s})=>{const[i,o]=b.useState("");b.useEffect(()=>{if(e){const c=r!=null?r.toString().replace(/,/g,"."):"";o(c)}},[e,r]);const a=c=>{const d=c.target.value.replace(/,/g,".");o(d)},l=c=>{if(c.key===","){c.preventDefault();const d=c.target,f=d.selectionStart,m=d.selectionEnd,v=d.value;o(v.substring(0,f)+"."+v.substring(m)),setTimeout(()=>d.setSelectionRange(f+1,f+1),0)}else c.key==="Enter"?u():c.key==="Escape"&&n()},u=()=>{s(i)};return e?h.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100] animate-fade-in",onClick:n,children:h.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-sm shadow-heavy animate-slide-up transition-colors",onClick:c=>c.stopPropagation(),children:[h.jsx("h3",{className:"text-center font-bold text-gray-900 dark:text-gray-100 mb-2",children:t}),h.jsx("p",{className:"text-center text-xs text-gray-500 dark:text-gray-400 mb-6",children:"   : 0.5  1.5"}),h.jsx("input",{type:"text",inputMode:"decimal",value:i,onChange:a,onKeyDown:l,placeholder:"0",autoFocus:!0,className:"w-full px-4 py-3 border-2 border-gray-100 dark:border-gray-700 rounded-xl text-lg text-center font-bold text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-900/50 focus:outline-none focus:border-primary dark:focus:border-primary transition-all"}),h.jsxs("div",{className:"flex gap-3 mt-6",children:[h.jsx("button",{onClick:n,className:"flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-xl text-sm font-bold hover:bg-gray-200 dark:hover:bg-gray-600 transition-all active:scale-95",children:""}),h.jsx("button",{onClick:u,className:"flex-1 py-3 bg-primary text-white rounded-xl text-sm font-bold shadow-md hover:bg-primary-hover transition-all active:scale-95",children:"OK"})]})]})}):null},nw=e=>e===0||e==="0"?"0":(e==null?void 0:e.toString())||"0",sw=e=>{const t=e.replace(/,/g,"."),r=parseFloat(t);return isNaN(r)?0:r},Io={bar1:{label:" 1",title:" 1 ()"},bar2:{label:" 2",title:" 2 ()"},cold_room:{label:". ",title:".  ()"}};function iw({products:e,searchQuery:t,categoryId:r,availableColumns:n,onEdit:s}){const i=e.filter(u=>{var c;if(r!==null&&u.category_id!==r||u.is_frozen)return!1;if(n.includes("bar1")&&!n.includes("bar2")){if(!u.visible_to_bar1)return!1}else if(n.includes("bar2")&&!n.includes("bar1")&&!u.visible_to_bar2)return!1;if(t){const d=t.toLowerCase();return u.name.toLowerCase().includes(d)||((c=u.category_name)==null?void 0:c.toLowerCase().includes(d))}return!0}),o=i.reduce((u,c)=>{const d=c.category_name||" ";return u[d]||(u[d]=[]),u[d].push(c),u},{});Object.keys(o).forEach(u=>{o[u].sort((c,d)=>c.order_index!=null&&d.order_index!=null?c.order_index-d.order_index:c.id-d.id)});const a=Object.keys(o).sort((u,c)=>{const d=o[u],f=o[c],m=Math.min(...d.map(w=>w.order_index||w.id)),v=Math.min(...f.map(w=>w.order_index||w.id));return m-v}),l=n.filter(u=>Io[u]);return i.length===0?h.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg border-2 border-dashed border-gray-200 dark:border-gray-600 p-8 text-center text-gray-500 dark:text-gray-400 mb-4 transition-colors",children:h.jsx("p",{children:"  "})}):h.jsx("div",{className:"w-full border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden mb-4 transition-colors",children:h.jsxs("table",{className:"w-full border-collapse table-fixed text-[10px] sm:text-xs md:text-sm",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-900/50 transition-colors",children:[h.jsx("th",{className:"p-1 sm:p-2 text-left font-bold text-gray-700 dark:text-gray-300 border-b-2 border-gray-200 dark:border-gray-700 w-[28%] sm:w-[30%] lg:w-[40%] break-words",children:""}),h.jsx("th",{className:"p-1 sm:p-2 text-center font-bold text-gray-700 dark:text-gray-300 border-b-2 border-gray-200 dark:border-gray-700 w-[8%] lg:w-[10%] break-words",children:", "}),l.map(u=>h.jsx("th",{className:"p-1 sm:p-2 text-center font-bold text-gray-700 dark:text-gray-300 border-b-2 border-gray-200 dark:border-gray-700 w-[22%] sm:w-[20%] lg:w-auto break-words",children:Io[u].title},u))]})}),h.jsx("tbody",{children:a.map(u=>{const c=o[u];return h.jsxs(zn.Fragment,{children:[h.jsx("tr",{className:"bg-gray-50 dark:bg-gray-800/50 transition-colors",children:h.jsxs("td",{colSpan:2+l.length,className:"p-1.5 sm:p-2 border-b border-gray-200 dark:border-gray-700",children:[h.jsx("span",{className:"font-bold text-gray-900 dark:text-gray-100 text-[11px] sm:text-xs mr-1",children:u}),h.jsxs("span",{className:"text-[10px] sm:text-[11px] text-gray-500 dark:text-gray-400",children:["(",c.length,")"]})]})}),c.map(d=>h.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors",children:[h.jsx("td",{className:"p-1.5 sm:p-2 border-b border-gray-100 dark:border-gray-700/50 text-gray-800 dark:text-gray-200 truncate",children:d.name}),h.jsx("td",{className:"p-1.5 sm:p-2 border-b border-gray-100 dark:border-gray-700/50 text-gray-800 dark:text-gray-200 text-center",children:d.volume}),l.map(f=>h.jsx("td",{className:"p-1 sm:p-2 border-b border-gray-100 dark:border-gray-700/50 text-center overflow-visible",children:h.jsx("button",{onClick:()=>s(d,f),className:"inline-flex items-center justify-center w-full min-h-[34px] sm:min-h-[38px] md:min-h-[44px] px-1 py-1 text-xs sm:text-sm font-medium text-gray-900 dark:text-gray-100 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm cursor-pointer transition-all hover:border-primary dark:hover:border-primary hover:text-primary dark:hover:text-primary-dark active:scale-[0.97]",title:` ${Io[f].label}: ${d.name}`,children:nw(d[f])})},f))]},d.id))]},u)})})]})})}const Of=({isOpen:e,type:t,categories:r,onClose:n,onAdd:s})=>{const[i,o]=b.useState(""),[a,l]=b.useState(""),[u,c]=b.useState(""),[d,f]=b.useState("");b.useEffect(()=>{e&&(o(""),l(""),c(""),f(""))},[e]);const m=()=>{if(t==="category"){if(!i.trim()){alert(",   ");return}s({name:i.trim()})}else{if(!a){alert(",  ");return}if(!u.trim()){alert(",   ");return}if(!d||parseInt(d)<=0){alert(",   ");return}s({category:parseInt(a),name:u.trim(),volume:d.trim()})}},v=w=>{w.key==="Enter"&&m(),w.key==="Escape"&&n()};return e?h.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100] animate-fade-in",onClick:n,children:h.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-sm shadow-heavy animate-slide-up transition-colors",onClick:w=>w.stopPropagation(),children:[h.jsx("h3",{className:"text-center font-bold text-gray-900 dark:text-gray-100 mb-6",children:t==="category"?"  ":"  "}),t==="category"&&h.jsxs("div",{className:"flex flex-col gap-1.5 mb-4",children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:" "}),h.jsx("input",{type:"text",value:i,onChange:w=>o(w.target.value),onKeyDown:v,placeholder:": ",className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:border-primary transition-all",autoFocus:!0})]}),t==="product"&&h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsxs("div",{className:"flex flex-col gap-1.5",children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:""}),h.jsxs("select",{value:a,onChange:w=>l(w.target.value),onKeyDown:v,className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:border-primary transition-all",children:[h.jsx("option",{value:"",children:" "}),r.map(w=>h.jsx("option",{value:w.id,children:w.name},w.id))]})]}),h.jsxs("div",{className:"flex flex-col gap-1.5",children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:" "}),h.jsx("input",{type:"text",value:u,onChange:w=>c(w.target.value),onKeyDown:v,placeholder:": Guinness",className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:border-primary transition-all"})]}),h.jsxs("div",{className:"flex flex-col gap-1.5",children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:" "}),h.jsx("input",{type:"text",value:d,onChange:w=>f(w.target.value),onKeyDown:v,placeholder:": 500 ",className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:border-primary transition-all"})]})]}),h.jsxs("div",{className:"flex gap-3 mt-8",children:[h.jsx("button",{onClick:n,className:"flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-xl text-sm font-bold hover:bg-gray-200 dark:hover:bg-gray-600 transition-all active:scale-95",children:""}),h.jsx("button",{onClick:m,className:"flex-1 py-3 bg-primary text-white rounded-xl text-sm font-bold shadow-md hover:bg-primary-hover transition-all active:scale-95",children:""})]})]})}):null};function Ms(e){if(e==null||e==="")return"0";const t=parseFloat(e);if(isNaN(t))return"0";const r=Math.round(t*100)/100;return Number.isInteger(r)?r.toString():`="${r.toString()}"`}function ow(e,t){const r=new Map(t.map(n=>[n.id,n.order_index||999]));return e.slice().sort((n,s)=>{const i=r.get(n.category_id)||999,o=r.get(s.category_id)||999;if(i!==o)return i-o;const a=n.order_index||999,l=s.order_index||999;return a-l})}function aw(e,t=[],r="_"){try{console.log(` :   ${e.length}`);const n=e.filter(v=>v.is_frozen!==!0);console.log(` : ${e.length-n.length}`),console.log(`  : ${n.length}`);const s=ow(n,t);console.log("    ");const i=[""," 1 ()"," 2 ()",".  ()",""],o=s.map(v=>{const w=parseFloat(v.bar1)||0,k=parseFloat(v.bar2)||0,g=parseFloat(v.cold_room)||0,p=w+k+g;return[v.name||"",Ms(w),Ms(k),Ms(g),Ms(p)]}),a=[i.join(";"),...o.map(v=>v.join(";"))].join(`
`),l="\uFEFF",u=new Blob([l+a],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a"),d=URL.createObjectURL(u),f=new Date().toISOString().split("T")[0],m=`${r}_${f}.csv`;return c.setAttribute("href",d),c.setAttribute("download",m),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(d),console.log(` CSV : ${m}`),console.log(` : ${s.length}`),{success:!0,filename:m,recordsCount:s.length}}catch(n){return console.error("   CSV:",n),{success:!1,error:n.message}}}function lw(){var N;const{user:e,userProfile:t,signOut:r,getAvailableColumns:n}=Ji(),s=qi(),[i,o]=b.useState([]),[a,l]=b.useState([]),[u,c]=b.useState(""),[d,f]=b.useState({message:"",type:"info"}),[m,v]=b.useState(!1),[w,k]=b.useState(null),[g,p]=b.useState({isOpen:!1,product:null,field:"",title:""}),[y,_]=b.useState({isOpen:!1,type:"product"}),S=n(),x=b.useCallback((j,P="info")=>{f({message:j,type:P})},[]),E=b.useCallback(()=>{try{const j=localStorage.getItem("barStockData");if(j){const P=JSON.parse(j);return o(P.categories||[]),l(P.products||[]),!0}}catch(j){console.error("   localStorage:",j)}return!1},[]),C=b.useCallback((j=!1)=>{try{return localStorage.setItem("barStockData",JSON.stringify({categories:i,products:a})),j&&x("   !","success"),!0}catch(P){return x(" : "+P.message,"error"),!1}},[i,a,x]),M=b.useCallback(async()=>{var j,P,F;try{v(!0),x("   ...","info"),console.log("    Supabase..."),console.log("  ...");const z=await dt.fetchCategories();console.log(`  ${z.length} `),console.log("  ...");const D=await dt.fetchProducts();console.log(`  ${D.length} `);const W=D.map(ye=>{var ue;return{...ye,category_name:((ue=z.find(O=>O.id===ye.category_id))==null?void 0:ue.name)||" "}});o(z),l(W),localStorage.setItem("barStockData",JSON.stringify({categories:z,products:W})),console.log("    Supabase"),x(` : ${z.length} , ${D.length} `,"success")}catch(z){console.error("    Supabase:",z);let D="   ";(j=z.message)!=null&&j.includes("fetch")||(P=z.message)!=null&&P.includes("network")?D+=":   ":(F=z.message)!=null&&F.includes(" ")?D+=":   Supabase":D+=`: ${z.message}`,x(D+".   .","warning"),E()}finally{v(!1)}},[x,E]),I=b.useCallback(async()=>{var j,P,F,z;if(!a||a.length===0){x("   ","warning");return}try{v(!0),x(` ${a.length}   ...`,"info"),console.log(`   ${a.length} ...`);const D=await dt.syncAll(a);if(console.log("  :",D),D.success&&D.updated===D.total)x(`    !  ${D.updated} `,"success"),C();else if(D.updated>0)x(`    : ${D.updated}  ${D.total} . ${D.failed} .`,"warning"),C(),D.errors&&D.errors.length>0&&(console.group("   :"),D.errors.forEach((W,ye)=>{console.error(`${ye+1}.`,W)}),console.groupEnd());else{const W=D.userMessage||`   . ${D.failed} .`;x(W,"error"),D.errors&&D.errors.length>0&&(console.group("   :"),D.errors.forEach((ye,ue)=>{console.error(`${ue+1}.`,ye)}),console.groupEnd())}}catch(D){console.error("   :",D);let W=" : ";(j=D.message)!=null&&j.includes("  ")?W+=D.message:(P=D.message)!=null&&P.includes("fetch")||(F=D.message)!=null&&F.includes("network")?W+="    .  .":(z=D.message)!=null&&z.includes("cors")?W+="    (CORS).   .":W+=D.message||" ",x(W,"error")}finally{v(!1),console.log("  , loading = false")}},[a,x,C]),be=b.useCallback(async()=>{window.confirm("   ?    .")?(console.log("   "),await M()):console.log("   ")},[M]);b.useEffect(()=>{(async()=>{console.log("  ..."),!E()||a.length===0?(console.log("   ,   Supabase..."),dt.client?await M():x("   Supabase","info")):console.log("    localStorage")})()},[]);const Ke=(j,P)=>{if(!S.includes(P)){x("       ","error");return}const F={bar1:" 1",bar2:" 2",cold_room:". "};p({isOpen:!0,product:j,field:P,title:`${j.name} - ${F[P]}`})},V=j=>{const P=sw(j);l(F=>F.map(z=>z.id===g.product.id?{...z,[g.field]:P}:z)),p({isOpen:!1,product:null,field:"",title:""})},br=async({category:j,name:P,volume:F})=>{const z=i.find(D=>D.name.toLowerCase()===j.toLowerCase());if(y.type==="category")if(i.some(W=>W.name.toLowerCase()===j.toLowerCase()))x("   ","error");else try{v(!0),x(" ...","info");const W=await dt.insertCategory({name:j,order_index:i.length+1});o(ue=>[...ue,W]);const ye=[...i,W];localStorage.setItem("barStockData",JSON.stringify({categories:ye,products:a})),x(` "${j}" `,"success")}catch(W){console.error("   :",W),x(`: ${W.message}`,"error")}finally{v(!1)}else{if(!z){x("  ","error");return}try{v(!0),x(" ...","info");const W={...await dt.insertProduct({category_id:z.id,name:P,volume:F,bar1:0,bar2:0,cold_room:0,order_index:a.length+1}),category_name:j};l(ue=>[...ue,W]);const ye=[...a,W];localStorage.setItem("barStockData",JSON.stringify({categories:i,products:ye})),x(` "${P}" `,"success")}catch(D){console.error("   :",D),x(`: ${D.message}`,"error")}finally{v(!1)}}_({isOpen:!1,type:"product"})},fn=()=>{aw(a),x("CSV  ...","success")},Xt=async()=>{window.confirm(" ,   ?")&&await r()},Zt=j=>({manager:"",bar1:" 1",bar2:" 2"})[j]||j;return h.jsxs("div",{className:"min-h-screen bg-background-light dark:bg-background-dark transition-colors",children:[h.jsx("header",{className:"bg-slate-900 dark:bg-gray-950 text-white p-4 shadow-lg sticky top-0 z-50 transition-colors",children:h.jsxs("div",{className:"max-w-7xl mx-auto flex flex-wrap justify-between items-center gap-4",children:[h.jsx("h1",{className:"text-xl font-bold",children:"  "}),h.jsxs("div",{className:"flex items-center gap-3 md:gap-4 flex-wrap",children:[h.jsxs("div",{className:"flex items-center gap-2 bg-white/10 dark:bg-white/5 px-3 py-1.5 rounded-lg border border-white/10",children:[h.jsx(ew,{className:"w-5 h-5 text-gray-300"}),h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-xs md:text-sm font-medium leading-tight",children:e==null?void 0:e.email}),h.jsx("span",{className:"text-[10px] md:text-xs text-gray-400 leading-tight",children:Zt(t==null?void 0:t.role)})]})]}),(t==null?void 0:t.role)==="manager"&&h.jsx(gt,{onClick:()=>s("/admin"),variant:"primary",size:"sm",className:"bg-indigo-500/20 hover:bg-indigo-500/30 border border-indigo-500/30 text-indigo-200 shadow-none",icon:Xv,children:h.jsx("span",{className:"hidden sm:inline",children:"-"})}),h.jsx(gt,{onClick:Xt,variant:"danger",size:"sm",icon:Gv,children:h.jsx("span",{className:"hidden sm:inline",children:""})})]})]})}),h.jsx("main",{className:"p-4 md:p-6",children:h.jsxs("div",{className:"max-w-7xl mx-auto bg-white dark:bg-gray-800 rounded-xl p-4 md:p-6 shadow-soft transition-colors",children:[h.jsx(jf,{message:d.message,type:d.type,onClose:()=>f({message:"",type:"info"})}),h.jsx(tw,{value:u,onChange:c}),h.jsxs("div",{className:"flex flex-wrap gap-2 mb-6 pb-4 border-b border-gray-100 dark:border-gray-700 overflow-x-auto",children:[h.jsx(gt,{variant:w===null?"primary":"ghost",size:"sm",className:`rounded-full whitespace-nowrap ${w!==null?"bg-gray-100 dark:bg-gray-700":""}`,onClick:()=>k(null),children:""}),i.map(j=>h.jsx(gt,{variant:w===j.id?"primary":"ghost",size:"sm",className:`rounded-full whitespace-nowrap ${w!==j.id?"bg-gray-100 dark:bg-gray-700":""}`,onClick:()=>k(j.id),children:j.name},j.id))]}),h.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:h.jsx(gt,{onClick:be,loading:m,variant:"info",className:"flex-1 min-w-[140px]",icon:Jv,children:""})}),h.jsx(iw,{products:a,searchQuery:u,categoryId:w,availableColumns:S,onEdit:Ke}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 mt-8",children:[h.jsx(gt,{onClick:()=>C(!0),variant:"secondary",className:"bg-blue-600 hover:bg-blue-700",icon:Qv,children:" "}),h.jsx(gt,{onClick:I,loading:m,variant:"primary",icon:Zv,children:"  "}),h.jsx(gt,{onClick:fn,variant:"ghost",className:"bg-gray-600 hover:bg-gray-700 text-white",icon:Hv,children:" CSV"})]})]})}),h.jsx(rw,{isOpen:g.isOpen,title:g.title,value:(N=g.product)==null?void 0:N[g.field],onClose:()=>p({isOpen:!1,product:null,field:"",title:""}),onConfirm:V}),h.jsx(Of,{isOpen:y.isOpen,type:y.type,categories:i,onClose:()=>_({isOpen:!1,type:"product"}),onAdd:br})]})}async function uw(e,t,r={}){try{console.log(`   ${e}  ${t}`);const{hideFromBar1:n=!0,hideFromBar2:s=!0}=r,{data:i,error:o}=await fe.from("products").select("*").eq("id",e).single();if(o)throw console.error("   :",o),o;if(!i)throw new Error("  ");if(i.is_frozen)return console.warn("   "),{success:!1,error:"  ",alreadyFrozen:!0};const{data:a,error:l}=await fe.from("products").update({is_frozen:!0,frozen_at:new Date().toISOString(),frozen_by:t,visible_to_bar1:!n,visible_to_bar2:!s}).eq("id",e).select().single();if(l)throw console.error("   :",l),l;return console.log("   "),{success:!0,data:a,message:` "${i.name}" `}}catch(n){return console.error("   :",n),{success:!1,error:n.message}}}async function cw(e,t){try{console.log(`   ${e}  ${t}`);const{data:r,error:n}=await fe.from("products").select("*").eq("id",e).single();if(n)throw console.error("   :",n),n;if(!r)throw new Error("  ");if(!r.is_frozen)return console.warn("   "),{success:!1,error:"  ",notFrozen:!0};const{data:s,error:i}=await fe.from("products").update({is_frozen:!1,frozen_at:null,frozen_by:null,visible_to_bar1:!0,visible_to_bar2:!0}).eq("id",e).select().single();if(i)throw console.error("   :",i),i;return console.log("   "),{success:!0,data:s,message:` "${r.name}" `}}catch(r){return console.error("   :",r),{success:!1,error:r.message}}}async function dw(e,t){try{console.log(`   ${e}  ${t}`);const{data:r,error:n}=await fe.from("products").select("*").eq("id",e).single();if(n)throw console.error("   :",n),n;if(!r)throw new Error("  ");const{error:s}=await fe.from("products").delete().eq("id",e);if(s)throw console.error("   :",s),s;return console.log("   "),{success:!0,message:` "${r.name}" `,deletedProduct:r}}catch(r){return console.error("   :",r),{success:!1,error:r.message}}}async function hw(e,t,r=null){try{if(console.log(`   ${e.length}   ${t}`),!e||e.length===0)return{success:!0,message:"   ",updated:0};const s=e.map(l=>({id:l.id,order_index:l.order_index})).map(l=>fe.from("products").update({order_index:l.order_index}).eq("id",l.id)),i=await Promise.allSettled(s),o=i.filter(l=>l.status==="fulfilled").length,a=i.filter(l=>l.status==="rejected").length;return console.log(`  ${o}  ${e.length} `),a>0&&console.warn(`    ${a} `),{success:a===0,updated:o,failed:a,total:e.length,message:a===0?"  ":` ${o}  ${e.length} `}}catch(n){return console.error("    :",n),{success:!1,error:n.message,updated:0,failed:e.length}}}const ei={STOCKS:{id:"stocks",name:"",flag:"red_flag",color:"red",icon:"",description:"   "},REVISION:{id:"revision",name:"",flag:"green_flag",color:"green",icon:"",description:"   "},LONG_FREEZE:{id:"long_freeze",name:" ",flag:"yellow_flag",color:"yellow",icon:"",description:"   "}};async function fw(e,t){try{console.log(`  : ${e}`);const r=Object.values(ei).find(a=>a.id===e);if(!r)throw new Error(`  : ${e}`);const{data:n,error:s}=await fe.from("products").select("id, name, "+r.flag);if(s)throw console.error("   :",s),s;console.log(`  : ${n.length}`);const i=n.filter(a=>a[r.flag]===!0),o=n.filter(a=>a[r.flag]===!1);if(console.log(`   ${r.icon}: ${i.length}`),console.log(`  : ${o.length}`),o.length>0){const a=o.map(u=>u.id),{error:l}=await fe.from("products").update({is_frozen:!0,visible_to_bar1:!1,visible_to_bar2:!1,frozen_at:new Date().toISOString(),frozen_by:t}).in("id",a);if(l)throw console.error("  :",l),l;console.log(` : ${o.length} `)}if(i.length>0){const a=i.map(u=>u.id),{error:l}=await fe.from("products").update({is_frozen:!1,visible_to_bar1:!0,visible_to_bar2:!0,frozen_at:null,frozen_by:null}).in("id",a);if(l)throw console.error("  :",l),l;console.log(` : ${i.length} `)}return{success:!0,scenario:r.name,activeProducts:i.length,frozenProducts:o.length,message:` "${r.name}" . : ${i.length}, : ${o.length}`}}catch(r){return console.error("    :",r),{success:!1,error:r.message}}}async function pw(){try{console.log("   ");const{error:e}=await fe.from("products").update({is_frozen:!1,visible_to_bar1:!0,visible_to_bar2:!0,frozen_at:null,frozen_by:null}).neq("id",0);if(e)throw console.error("  :",e),e;return console.log("   "),{success:!0,message:"  .   ."}}catch(e){return console.error("    :",e),{success:!1,error:e.message}}}async function Dc(){try{const{data:e,error:t}=await fe.from("products").select("red_flag, green_flag, yellow_flag");if(t)throw t;return{success:!0,stats:{total:e.length,red:e.filter(n=>n.red_flag).length,green:e.filter(n=>n.green_flag).length,yellow:e.filter(n=>n.yellow_flag).length,noFlags:e.filter(n=>!n.red_flag&&!n.green_flag&&!n.yellow_flag).length}}}catch(e){return console.error("   :",e),{success:!1,error:e.message}}}async function gw(e,t){try{console.log(`     ${e}:`,t);const{error:r}=await fe.from("products").update({red_flag:t.red??!1,green_flag:t.green??!1,yellow_flag:t.yellow??!1}).eq("id",e);if(r)throw r;return{success:!0}}catch(r){return console.error("   :",r),{success:!1,error:r.message}}}const mw=({product:e,index:t,isDragging:r,onDragStart:n,onDragEnd:s,onDragOver:i,onDrop:o,onFreeze:a,onUnfreeze:l,onDelete:u,onOpenFlagModal:c})=>h.jsxs("tr",{className:`
        transition-colors border-b border-gray-100 dark:border-gray-700/50
        ${r?"bg-primary/5 opacity-50":"hover:bg-gray-50 dark:hover:bg-gray-800/30"}
        ${e.is_frozen?"bg-blue-50/30 dark:bg-blue-900/10":""}
      `,draggable:!0,onDragStart:d=>n(d,t),onDragEnd:s,onDragOver:d=>i(d,t),onDrop:d=>o(d,t),children:[h.jsx("td",{className:"p-2 sm:p-3 text-center w-10 sm:w-12",children:h.jsx("span",{className:"cursor-move text-gray-400 dark:text-gray-600 text-lg sm:text-xl select-none",title:"   ",children:""})}),h.jsx("td",{className:"p-2 sm:p-3 text-sm font-medium text-gray-900 dark:text-gray-100",children:h.jsxs("div",{className:"flex items-center gap-2",children:[e.name,e.is_frozen&&h.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded",title:" ",children:""})]})}),h.jsx("td",{className:"p-2 sm:p-3 text-sm text-gray-500 dark:text-gray-400",children:e.volume}),h.jsx("td",{className:"p-2 sm:p-3 text-center",children:h.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md py-1",children:e.bar1})}),h.jsx("td",{className:"p-2 sm:p-3 text-center",children:h.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md py-1",children:e.bar2})}),h.jsx("td",{className:"p-2 sm:p-3 text-center",children:h.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md py-1",children:e.cold_room})}),h.jsx("td",{className:"p-2 sm:p-3",children:h.jsxs("div",{className:"flex items-center justify-end gap-1 sm:gap-2",children:[h.jsx("button",{onClick:()=>c(e),className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-all",title:" ",children:h.jsxs("div",{className:"flex gap-0.5 scale-75 sm:scale-100",children:[e.red_flag&&h.jsx("span",{children:""}),e.green_flag&&h.jsx("span",{children:""}),e.yellow_flag&&h.jsx("span",{children:""}),!e.red_flag&&!e.green_flag&&!e.yellow_flag&&h.jsx("span",{className:"opacity-30",children:""})]})}),e.is_frozen?h.jsx("button",{onClick:()=>l(e.id),className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center bg-orange-100 dark:bg-orange-900/30 hover:bg-orange-200 dark:hover:bg-orange-900/50 text-orange-600 dark:text-orange-400 rounded-lg transition-all active:scale-95",title:" ",children:""}):h.jsx("button",{onClick:()=>a(e.id),className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50 text-blue-600 dark:text-blue-400 rounded-lg transition-all active:scale-95",title:" ",children:""}),h.jsx("button",{onClick:()=>u(e.id,e.name),className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-900/50 text-red-600 dark:text-red-400 rounded-lg transition-all active:scale-95",title:" ",children:""})]})})]}),yw=({products:e,categories:t,onFreeze:r,onUnfreeze:n,onDelete:s,onReorder:i,onOpenFlagModal:o})=>{const[a,l]=b.useState(e),[u,c]=b.useState(null);zn.useEffect(()=>{l(e)},[e]);const d=(_,S)=>{c(S),_.dataTransfer.effectAllowed="move"},f=()=>{c(null)},m=(_,S)=>{if(_.preventDefault(),_.dataTransfer.dropEffect="move",u===null||u===S)return;const x=[...a],E=x[u];x.splice(u,1),x.splice(S,0,E),l(x),c(S)},v=(_,S)=>{_.preventDefault(),_.stopPropagation(),u!==null&&i(a)},w=a.reduce((_,S)=>{const x=S.category_id,E=t.find(M=>M.id===x),C=E?E.name:" ";return _[C]||(_[C]=[]),_[C].push(S),_},{}),k=Object.keys(w).sort((_,S)=>{const x=t.find(C=>C.name===_),E=t.find(C=>C.name===S);return((x==null?void 0:x.order_index)||999)-((E==null?void 0:E.order_index)||999)}),g=e.length,p=e.filter(_=>_.is_frozen).length,y=g-p;return e.length===0?h.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8 text-center border border-gray-200 dark:border-gray-700 transition-colors",children:h.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"  "})}):h.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-soft border border-gray-100 dark:border-gray-700 overflow-hidden transition-colors",children:[h.jsxs("div",{className:"flex flex-wrap items-center gap-6 p-4 sm:p-6 bg-gray-50 dark:bg-gray-900/40 border-b border-gray-100 dark:border-gray-700 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:":"}),h.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:g})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:":"}),h.jsx("span",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:y})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:":"}),h.jsx("span",{className:"text-lg font-bold text-amber-600 dark:text-amber-400",children:p})]})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full border-collapse",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-900/20",children:[h.jsx("th",{className:"w-12 p-3 border-b border-gray-200 dark:border-gray-700 transition-colors"}),h.jsx("th",{className:"p-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700 transition-colors",children:""}),h.jsx("th",{className:"p-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700 transition-colors",children:", "}),h.jsx("th",{className:"p-3 text-center text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700 transition-colors w-24 sm:w-32",children:" 1"}),h.jsx("th",{className:"p-3 text-center text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700 transition-colors w-24 sm:w-32",children:" 2"}),h.jsx("th",{className:"p-3 text-center text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700 transition-colors w-24 sm:w-32",children:""}),h.jsx("th",{className:"p-3 text-right text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700 transition-colors w-32 sm:w-48",children:""})]})}),h.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:k.map(_=>{const S=w[_];return h.jsxs(zn.Fragment,{children:[h.jsx("tr",{className:"bg-gray-50/50 dark:bg-gray-800/80 transition-colors",children:h.jsx("td",{colSpan:"7",className:"p-3 sm:p-4 border-y border-gray-100 dark:border-gray-700",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:_}),h.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:["(",S.length," .)"]})]})})}),S.map((x,E)=>h.jsx(mw,{product:x,index:a.indexOf(x),isDragging:u===a.indexOf(x),onDragStart:d,onDragEnd:f,onDragOver:m,onDrop:v,onFreeze:r,onUnfreeze:n,onDelete:s,onOpenFlagModal:o},x.id))]},_)})})]})}),h.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/20 border-t border-gray-100 dark:border-gray-700 transition-colors",children:h.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 italic flex items-center gap-2",children:[h.jsx("span",{children:""})," :         "]})})]})},vw=({isOpen:e,product:t,flags:r,onFlagsChange:n,onSave:s,onClose:i})=>{if(!e)return null;const o=l=>{n({...r,[l]:!r[l]})},a=l=>{l.key==="Enter"&&s(),l.key==="Escape"&&i()};return h.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",onClick:i,onKeyDown:a,children:h.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-md rounded-2xl shadow-heavy overflow-hidden animate-slide-up transition-colors",onClick:l=>l.stopPropagation(),children:[h.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700 transition-colors",children:[h.jsxs("h3",{className:"font-bold text-gray-900 dark:text-gray-100",children:[" : ",t==null?void 0:t.name]}),h.jsx("button",{className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",onClick:i,children:""})]}),h.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[h.jsxs("label",{className:"flex items-center gap-4 p-3 rounded-xl border border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-all group",children:[h.jsx("input",{type:"checkbox",checked:r.red,onChange:()=>o("red"),className:"w-5 h-5 rounded border-gray-300 text-red-600 focus:ring-red-500"}),h.jsx("span",{className:"text-2xl group-hover:scale-110 transition-transform",children:""}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-bold text-gray-900 dark:text-gray-100 text-sm",children:""}),h.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"   "})]})]}),h.jsxs("label",{className:"flex items-center gap-4 p-3 rounded-xl border border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-all group",children:[h.jsx("input",{type:"checkbox",checked:r.green,onChange:()=>o("green"),className:"w-5 h-5 rounded border-gray-300 text-green-600 focus:ring-green-500"}),h.jsx("span",{className:"text-2xl group-hover:scale-110 transition-transform",children:""}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-bold text-gray-900 dark:text-gray-100 text-sm",children:""}),h.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"   "})]})]}),h.jsxs("label",{className:"flex items-center gap-4 p-3 rounded-xl border border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-all group",children:[h.jsx("input",{type:"checkbox",checked:r.yellow,onChange:()=>o("yellow"),className:"w-5 h-5 rounded border-gray-300 text-amber-500 focus:ring-amber-500"}),h.jsx("span",{className:"text-2xl group-hover:scale-110 transition-transform",children:""}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-bold text-gray-900 dark:text-gray-100 text-sm",children:" "}),h.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"   "})]})]})]}),h.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/40 flex justify-end gap-3 transition-colors",children:[h.jsx("button",{className:"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",onClick:i,children:""}),h.jsx("button",{className:"px-6 py-2 bg-primary hover:bg-primary-hover text-white rounded-lg text-sm font-bold shadow-md transition-all active:scale-95 flex items-center gap-2",onClick:s,children:" "})]})]})})},ww=()=>{var ye,ue;const{userProfile:e}=Ji(),t=qi(),[r,n]=b.useState([]),[s,i]=b.useState([]),[o,a]=b.useState(!0),[l,u]=b.useState(null),[c,d]=b.useState(""),[f,m]=b.useState("products"),[v,w]=b.useState(null),[k,g]=b.useState(!0),[p,y]=b.useState(!0),[_,S]=b.useState({isOpen:!1,type:"product"}),[x,E]=b.useState({isOpen:!1,product:null,flags:{red:!1,green:!1,yellow:!1}}),[C,M]=b.useState(null),[I,be]=b.useState(null);b.useEffect(()=>{e&&e.role!=="manager"&&(console.warn("    - -"),V(" ","error"),t("/"))},[e,t]);const Ke=async()=>{try{a(!0),console.log("    -...");const[O,$,pe]=await Promise.all([dt.fetchCategories(),dt.fetchProducts(),Dc()]);n(O),i($),pe.success&&M(pe.stats),console.log(` : ${O.length} , ${$.length} `)}catch(O){console.error("   :",O),V("  ","error")}finally{a(!1)}};b.useEffect(()=>{Ke()},[]);const V=(O,$="info")=>{w({message:O,type:$}),setTimeout(()=>w(null),3e3)},br=()=>{let O=s;if(l&&(O=O.filter($=>$.category_id===l.id)),O=O.filter($=>!($.is_frozen&&!k||!$.is_frozen&&!p)),c.trim()){const $=c.toLowerCase();O=O.filter(pe=>pe.name.toLowerCase().includes($)||pe.volume.toLowerCase().includes($))}return O},fn=async O=>{try{console.log(`   ${O}`);const $=await uw(O,e.email,{hideFromBar1:!0,hideFromBar2:!0});$.success?(V($.message,"success"),i(pe=>pe.map(K=>K.id===O?{...K,is_frozen:!0,visible_to_bar1:!1,visible_to_bar2:!1}:K))):V($.error||" ","error")}catch($){console.error("  :",$),V("  ","error")}},Xt=async O=>{try{console.log(`   ${O}`);const $=await cw(O,e.email);$.success?(V($.message,"success"),i(pe=>pe.map(K=>K.id===O?{...K,is_frozen:!1,visible_to_bar1:!0,visible_to_bar2:!0}:K))):V($.error||" ","error")}catch($){console.error("  :",$),V("  ","error")}},Zt=async(O,$)=>{if(window.confirm(` ,    "${$}"?

   .`))try{console.log(`   ${O}`);const K=await dw(O,$,e.email);K.success?(V(` "${$}" `,"success"),i(er=>er.filter(Nf=>Nf.id!==O))):V(K.error||" ","error")}catch(K){console.error("  :",K),V("  ","error")}},N=async O=>{try{console.log("   "),(await hw(O,e.email)).success?(i(O),V("  ","success")):V("  ","error")}catch($){console.error("   :",$),V("  ","error")}},j=async({category:O,name:$,volume:pe})=>{try{if(_.type==="category"){console.log("  :",$);const K=await dt.insertCategory({name:$,order_index:r.length+1});K?(V(` "${$}"  !`,"success"),n(er=>[...er,K]),S({isOpen:!1,type:"product"})):V("  ","error")}else{console.log("  :",{category:O,name:$,volume:pe});const K=await dt.insertProduct({category_id:O,name:$,volume:pe,bar1:0,bar2:0,cold_room:0,order_index:s.length+1});K?(V(` "${$}"  !`,"success"),i(er=>[...er,K]),S({isOpen:!1,type:"product"})):V("  ","error")}}catch(K){console.error("  :",K),V(" : "+K.message,"error")}},P=O=>{E({isOpen:!0,product:O,flags:{red:O.red_flag||!1,green:O.green_flag||!1,yellow:O.yellow_flag||!1}})},F=async()=>{try{if((await gw(x.product.id,x.flags)).success){V(" ","success"),i(pe=>pe.map(K=>K.id===x.product.id?{...K,red_flag:x.flags.red,green_flag:x.flags.green,yellow_flag:x.flags.yellow}:K)),E({isOpen:!1,product:null,flags:{}});const $=await Dc();$.success&&M($.stats)}else V("  ","error")}catch(O){console.error(":",O),V("  ","error")}},z=async O=>{const $=Object.values(ei).find(er=>er.id===O);if(!window.confirm(`  "${$.name}"?

     ${$.icon} .`))return;a(!0);const K=await fw(O,e.email);K.success?(V(K.message,"success"),be(O),await Ke()):V("  : "+K.error,"error"),a(!1)},D=async()=>{if(!window.confirm(`  ?

   .`))return;a(!0);const $=await pw();$.success?(V($.message,"success"),be(null),await Ke()):V("  : "+$.error,"error"),a(!1)},W=br();return e&&e.role!=="manager"?h.jsx("div",{className:"admin-panel-access-denied",children:h.jsxs("div",{className:"access-denied-card",children:[h.jsx("h2",{children:"  "}),h.jsx("p",{children:"    ."}),h.jsx("button",{onClick:()=>t("/"),className:"btn-primary",children:"  "})]})}):o?h.jsxs("div",{className:"admin-panel-loading",children:[h.jsx("div",{className:"spinner"}),h.jsx("p",{children:" ..."})]}):h.jsxs("div",{className:"min-h-screen bg-background-light dark:bg-background-dark transition-colors",children:[h.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 sticky top-0 z-50 transition-colors",children:h.jsxs("div",{className:"max-w-7xl mx-auto flex flex-wrap justify-between items-center gap-4",children:[h.jsxs("div",{children:[h.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[h.jsx("span",{children:""})," -"]}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"   "})]}),h.jsx("div",{children:h.jsx("button",{onClick:()=>t("/"),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg text-sm font-medium transition-all",children:"   "})})]})}),h.jsx("div",{className:"max-w-7xl mx-auto px-4 mt-6",children:h.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:h.jsx("button",{className:`px-6 py-3 text-sm font-medium transition-all border-b-2
              ${f==="products"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,onClick:()=>m("products"),children:" "})})}),h.jsx("div",{className:"max-w-7xl mx-auto p-4 md:p-6",children:f==="products"&&h.jsxs("div",{className:"animate-slide-up",children:[h.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-soft border border-gray-100 dark:border-gray-700 mb-8 transition-colors",children:[h.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-6 flex items-center gap-2",children:[h.jsx("span",{children:""})," "]}),I&&h.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-xl p-4 mb-6 flex flex-wrap items-center gap-4 animate-pulse",children:[h.jsx("span",{className:"text-2xl",children:(ye=Object.values(ei).find(O=>O.id===I))==null?void 0:ye.icon}),h.jsxs("div",{className:"flex-1 min-w-[200px]",children:[h.jsxs("div",{className:"font-bold text-primary",children:[": ",(ue=Object.values(ei).find(O=>O.id===I))==null?void 0:ue.name]}),h.jsxs("div",{className:"text-sm text-primary/80",children:[" : ",I==="stocks"?C==null?void 0:C.red:I==="revision"?C==null?void 0:C.green:C==null?void 0:C.yellow]})]}),h.jsx("button",{className:"px-4 py-2 bg-white dark:bg-gray-700 text-primary dark:text-primary-dark rounded-lg text-sm font-bold shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 transition-all active:scale-95",onClick:D,children:" "})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/40 rounded-xl p-5 border border-gray-100 dark:border-gray-700 transition-colors",children:[h.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[h.jsx("span",{className:"text-3xl",children:""}),h.jsxs("div",{children:[h.jsx("div",{className:"font-bold text-gray-900 dark:text-gray-100",children:""}),h.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:" "})]})]}),h.jsxs("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-4",children:[(C==null?void 0:C.red)||0," "]}),h.jsx("button",{className:`w-full py-2.5 rounded-lg text-sm font-bold transition-all
                      ${I==="stocks"?"bg-red-100 text-red-600 cursor-default":"bg-red-600 hover:bg-red-700 text-white shadow-md active:scale-95"}`,onClick:()=>z("stocks"),disabled:I==="stocks",children:I==="stocks"?" ":" "})]}),h.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/40 rounded-xl p-5 border border-gray-100 dark:border-gray-700 transition-colors",children:[h.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[h.jsx("span",{className:"text-3xl",children:""}),h.jsxs("div",{children:[h.jsx("div",{className:"font-bold text-gray-900 dark:text-gray-100",children:""}),h.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:" "})]})]}),h.jsxs("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-4",children:[(C==null?void 0:C.green)||0," "]}),h.jsx("button",{className:`w-full py-2.5 rounded-lg text-sm font-bold transition-all
                      ${I==="revision"?"bg-green-100 text-green-600 cursor-default":"bg-green-600 hover:bg-green-700 text-white shadow-md active:scale-95"}`,onClick:()=>z("revision"),disabled:I==="revision",children:I==="revision"?" ":" "})]}),h.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/40 rounded-xl p-5 border border-gray-100 dark:border-gray-700 transition-colors",children:[h.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[h.jsx("span",{className:"text-3xl",children:""}),h.jsxs("div",{children:[h.jsx("div",{className:"font-bold text-gray-900 dark:text-gray-100",children:" "}),h.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"/"})]})]}),h.jsxs("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-4",children:[(C==null?void 0:C.yellow)||0," "]}),h.jsx("button",{className:`w-full py-2.5 rounded-lg text-sm font-bold transition-all
                      ${I==="long_freeze"?"bg-amber-100 text-amber-600 cursor-default":"bg-amber-500 hover:bg-amber-600 text-white shadow-md active:scale-95"}`,onClick:()=>z("long_freeze"),disabled:I==="long_freeze",children:I==="long_freeze"?" ":" "})]})]})]}),h.jsxs("div",{className:"flex flex-wrap items-end gap-4 mb-8 bg-gray-50 dark:bg-gray-800/50 p-4 rounded-xl border border-gray-100 dark:border-gray-700 transition-colors",children:[h.jsxs("div",{className:"flex flex-col gap-1.5 flex-1 min-w-[200px]",children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:":"}),h.jsxs("select",{value:(l==null?void 0:l.id)||"",onChange:O=>{const $=O.target.value;u($?r.find(pe=>pe.id===parseInt($)):null)},className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none transition-all",children:[h.jsx("option",{value:"",children:" "}),r.map(O=>h.jsx("option",{value:O.id,children:O.name},O.id))]})]}),h.jsxs("div",{className:"flex flex-col gap-1.5 flex-1 min-w-[200px]",children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:":"}),h.jsx("input",{type:"text",placeholder:"  ...",value:c,onChange:O=>d(O.target.value),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none transition-all"})]}),h.jsxs("div",{className:"flex flex-col gap-1.5",children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:":"}),h.jsxs("div",{className:"flex items-center gap-4 bg-white dark:bg-gray-700 px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg h-[38px]",children:[h.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[h.jsx("input",{type:"checkbox",checked:p,onChange:O=>y(O.target.checked),className:"w-4 h-4 rounded text-primary focus:ring-primary/20 border-gray-300"}),h.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 group-hover:text-primary transition-colors",children:""})]}),h.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[h.jsx("input",{type:"checkbox",checked:k,onChange:O=>g(O.target.checked),className:"w-4 h-4 rounded text-primary focus:ring-primary/20 border-gray-300"}),h.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 group-hover:text-primary transition-colors",children:""})]})]})]}),h.jsx("div",{className:"flex-shrink-0",children:h.jsx("button",{onClick:Ke,className:"h-[38px] px-4 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-lg text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-600 transition-all flex items-center gap-2 active:scale-95",children:" "})}),h.jsx("div",{className:"flex-shrink-0",children:h.jsx("button",{onClick:()=>S({isOpen:!0,type:"product"}),className:"h-[38px] px-4 bg-primary hover:bg-primary-hover text-white rounded-lg text-sm font-bold shadow-md transition-all active:scale-95 flex items-center gap-2",children:"  "})}),h.jsx("div",{className:"flex-shrink-0",children:h.jsx("button",{onClick:()=>S({isOpen:!0,type:"category"}),className:"h-[38px] px-4 bg-gray-600 hover:bg-gray-700 text-white rounded-lg text-sm font-bold shadow-md transition-all active:scale-95 flex items-center gap-2",children:"  "})})]}),h.jsx(yw,{products:W,categories:r,onFreeze:fn,onUnfreeze:Xt,onDelete:Zt,onReorder:N,onOpenFlagModal:P}),W.length===0&&h.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center border border-gray-200 dark:border-gray-700 transition-colors",children:[h.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"   "}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"     "})]})]})}),v&&h.jsx(jf,{message:v.message,type:v.type,onClose:()=>w(null)}),h.jsx(Of,{isOpen:_.isOpen,type:_.type,categories:r,onClose:()=>S({isOpen:!1,type:"product"}),onAdd:j}),h.jsx(vw,{isOpen:x.isOpen,product:x.product,flags:x.flags,onFlagsChange:O=>E($=>({...$,flags:O})),onSave:F,onClose:()=>E({isOpen:!1,product:null,flags:{}})})]})},_w=()=>{const{user:e,userProfile:t,loading:r}=Ji();return r?h.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-[#1a1a2e] via-[#16213e] to-[#0f3460] text-white transition-colors",children:[h.jsx("div",{className:"w-12 h-12 border-4 border-white/20 border-t-primary rounded-full animate-spin"}),h.jsx("p",{className:"mt-4 text-white/80 animate-pulse",children:"..."})]}):h.jsxs(Qm,{children:[h.jsx(Zs,{path:"/login",element:e?h.jsx(So,{to:"/",replace:!0}):h.jsx(Vv,{})}),h.jsx(Zs,{path:"/admin",element:e&&(t==null?void 0:t.role)==="manager"?h.jsx(ww,{}):h.jsx(So,{to:e?"/":"/login",replace:!0})}),h.jsx(Zs,{path:"/*",element:e?h.jsx(lw,{}):h.jsx(So,{to:"/login",replace:!0})})]})};function xw(){return h.jsx(Fv,{children:h.jsx(Zm,{basename:"/React-Fullerspub-ast",children:h.jsx(_w,{})})})}Lo.createRoot(document.getElementById("root")).render(h.jsx(zn.StrictMode,{children:h.jsx(xw,{})}));
